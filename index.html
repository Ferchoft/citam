<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema CITAM - Consolidación de Carga</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --info-color: #4895ef;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --text-color: #333;
            --bg-color: #ffffff;
            --card-bg: #ffffff;
            --sidebar-bg: #2b2d42;
            --sidebar-text: #ffffff;
            --border-color: #e9ecef;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* Nuevas variables para el menú */
            --menu-item-bg: rgba(255, 255, 255, 0.05);
            --menu-item-hover-bg: rgba(255, 255, 255, 0.1);
            --menu-item-active-bg: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(247, 37, 133, 0.1));
            --menu-item-active-border: 4px solid var(--accent-color);
            --menu-item-text: rgba(255, 255, 255, 0.85);
            --menu-item-active-text: #ffffff;
            --menu-item-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --menu-item-hover-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            --menu-icon-color: var(--primary-color);
            --menu-icon-active-color: var(--accent-color);
        }
    
        .dark-mode {
            --primary-color: #4895ef;
            --secondary-color: #4361ee;
            --accent-color: #f72585;
            --light-color: #343a40;
            --dark-color: #f8f9fa;
            --text-color: #f8f9fa;
            --bg-color: #212529;
            --card-bg: #2b2d42;
            --sidebar-bg: #1a1a2e;
            --sidebar-text: #ffffff;
            --border-color: #495057;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            
            /* Ajustes para modo oscuro */
            --menu-item-bg: rgba(255, 255, 255, 0.08);
            --menu-item-hover-bg: rgba(255, 255, 255, 0.15);
            --menu-item-active-bg: linear-gradient(135deg, rgba(72, 149, 239, 0.2), rgba(247, 37, 133, 0.15));
        }
    
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    
        body {
            display: flex;
            min-height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: var(--transition);
        }
    
        /* Sidebar - Estilos mejorados */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: var(--transition);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
    
        .sidebar-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    
        .sidebar-header img {
            max-width: 70%;
            margin-bottom: 15px;
            border-radius: 8px;
        }
    
        .theme-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: var(--transition);
        }
    
        .theme-toggle:hover {
            background: var(--secondary-color);
        }
    
        .sidebar-menu {
            display: flex;
            flex-direction: column;
            padding: 15px 10px;
            gap: 8px;
        }
    
        .menu-item {
            padding: 14px 20px;
            margin: 0 10px;
            border-radius: 8px;
            color: var(--menu-item-text);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-left: 4px solid transparent;
            font-size: 15px;
            font-weight: 500;
            background: var(--menu-item-bg);
            box-shadow: var(--menu-item-shadow);
            animation: fadeInLeft 0.4s ease forwards;
            cursor: pointer;
            
            /* Efecto de borde animado */
            &::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 3px;
                height: 100%;
                background: var(--accent-color);
                transform: scaleY(0);
                transform-origin: bottom;
                transition: transform 0.3s ease;
            }
            
            i {
                font-size: 18px;
                width: 24px;
                text-align: center;
                margin-right: 15px;
                color: var(--menu-icon-color);
                transition: all 0.3s ease;
                position: relative;
                z-index: 1;
            }
            
            span {
                position: relative;
                z-index: 1;
                transition: transform 0.3s ease;
            }
            
            &:hover {
                color: var(--menu-item-active-text);
                transform: translateX(5px);
                background: var(--menu-item-hover-bg);
                box-shadow: var(--menu-item-hover-shadow);
                
                i {
                    color: var(--menu-icon-active-color);
                    transform: scale(1.1);
                }
                
                &::before {
                    transform: scaleY(1);
                }
            }
            
            &.active {
                background: var(--menu-item-active-bg);
                color: var(--menu-item-active-text);
                border-left: var(--menu-item-active-border);
                font-weight: 600;
                
                i {
                    color: var(--menu-icon-active-color);
                }
                
                &::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 3px;
                    height: 100%;
                    background: var(--accent-color);
                }
            }
        }
    
        /* Animación al cargar */
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    
        .menu-item:nth-child(1) { animation-delay: 0.1s; }
        .menu-item:nth-child(2) { animation-delay: 0.2s; }
        .menu-item:nth-child(3) { animation-delay: 0.3s; }
        .menu-item:nth-child(4) { animation-delay: 0.4s; }
        .menu-item:nth-child(5) { animation-delay: 0.5s; }
        .menu-item:nth-child(6) { animation-delay: 0.6s; }
        .menu-item:nth-child(7) { animation-delay: 0.7s; }
    
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 25px;
            transition: var(--transition);
        }
    
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
    
        .header h1 {
            color: var(--primary-color);
            font-size: 26px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
    
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
    
        .notifications {
            position: relative;
            cursor: pointer;
        }
    
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
    
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
    
        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }
    
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
    
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
    
        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }
    
        .card-icon.inventory {
            background-color: var(--info-color);
        }
    
        .card-icon.pending {
            background-color: var(--warning-color);
        }
    
        .card-icon.transit {
            background-color: var(--primary-color);
        }
    
        .card-icon.delivered {
            background-color: var(--success-color);
        }
    
        .card-icon.customers {
            background-color: var(--accent-color);
        }
    
        .card-icon.favorites {
            background-color: #7209b7;
        }
    
        .card-title {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 5px;
        }
    
        .card-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-color);
        }
    
        /* Section Content */
        .section-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
    
        .section-title {
            font-size: 22px;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
    
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
    
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: var(--transition);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
    
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
    
        /* Buttons */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
        }
    
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
        }
    
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
    
        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
    
        .btn-danger {
            background-color: var(--accent-color);
            color: white;
        }
    
        .btn-danger:hover {
            background-color: #d81159;
            transform: translateY(-2px);
        }
    
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
    
        .btn-success:hover {
            background-color: #3a86ff;
            transform: translateY(-2px);
        }
    
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
    
        .btn-warning:hover {
            background-color: #f3722c;
            transform: translateY(-2px);
        }
    
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
    
        .btn-outline:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }
    
        /* Tables */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 15px;
        }
    
        .table th, .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
    
        .table th {
            background-color: var(--light-color);
            color: var(--dark-color);
            font-weight: 600;
        }
    
        .table tr:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }
    
        /* Status Badges */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            display: inline-block;
        }
    
        .status-pending {
            background-color: rgba(248, 150, 30, 0.2);
            color: var(--warning-color);
        }
    
        .status-transit {
            background-color: rgba(67, 97, 238, 0.2);
            color: var(--primary-color);
        }
    
        .status-delivered {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success-color);
        }
    
        .favorite-icon {
            color: #ffd700;
            cursor: pointer;
            font-size: 18px;
            transition: var(--transition);
        }
    
        .favorite-icon:hover {
            transform: scale(1.2);
        }
    
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
        }
    
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
    
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s;
        }
    
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
    
        .modal-title {
            font-size: 20px;
            color: var(--primary-color);
            font-weight: 600;
        }
    
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
        }
    
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }
    
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                overflow: hidden;
            }
            .sidebar-header span {
                display: none;
            }
            .menu-item span {
                display: none;
            }
            .menu-item {
                justify-content: center;
                padding: 18px 0;
                margin: 4px 0;
                border-radius: 0;
            }
            .menu-item i {
                margin-right: 0;
                font-size: 20px;
            }
            .main-content {
                margin-left: 80px;
            }
            .sidebar-header img {
                max-width: 50px;
            }
            .theme-toggle span {
                display: none;
            }
            
            /* Ajustes para móvil del menú */
            .menu-item:hover {
                transform: none;
                background: var(--menu-item-hover-bg);
            }
            
            .menu-item.active {
                border-left: none;
                border-top: 3px solid var(--accent-color);
                background: var(--menu-item-hover-bg);
            }
        }
    
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr 1fr;
            }
            .header h1 {
                font-size: 22px;
            }
        }
    
        @media (max-width: 576px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            .main-content {
                padding: 15px;
            }
            .section-content {
                padding: 15px;
            }
            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }
            .btn {
                padding: 10px 15px;
            }
        }
    
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
    
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }
    
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
    
        .toast.error {
            background-color: var(--accent-color);
        }
    
        /* Edit Modal */
        .edit-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
    
        .edit-form .form-group {
            margin-bottom: 15px;
        }
    
        .form-group.full-width {
            grid-column: span 2;
        }
    
        /* Favorites Section */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
    
        .favorite-item {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
        }
    
        .favorite-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
    
        .favorite-item .remove-favorite {
            position: absolute;
            top: 10px;
            right: 10px;
            color: var(--accent-color);
            cursor: pointer;
            opacity: 0;
            transition: var(--transition);
        }
    
        .favorite-item:hover .remove-favorite {
            opacity: 1;
        }
    
        .favorite-item h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
            font-size: 16px;
        }
    
        .favorite-item p {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 5px;
        }
    
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-color);
            opacity: 0.7;
            grid-column: span 3;
        }
    
        .empty-state i {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
    
        .empty-state p {
            font-size: 16px;
        }
    
        /* Página independiente */
        .full-page {
            display: none;
            width: 100%;
            min-height: 100vh;
            padding: 25px;
            margin-left: 280px;
        }
    
        .full-page.active {
            display: block;
        }
    
        @media (max-width: 992px) {
            .full-page {
                margin-left: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Barra lateral de navegación -->
    <div class="sidebar">
        <div class="sidebar-header">
            <img src="https://citam.net/wp-content/uploads/2020/11/citam.png" alt="CITAM Logo">
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Modo Oscuro</span>
            </button>
        </div>
        <div class="sidebar-menu">
            <a href="#dashboard" class="menu-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#inventory" class="menu-item" data-section="inventory">
                <i class="fas fa-boxes"></i>
                <span>Inventario</span>
            </a>
            <a href="#favorites" class="menu-item" data-section="favorites">
                <i class="fas fa-star"></i>
                <span>Favoritos</span>
            </a>
            <a href="#shipments" class="menu-item" data-section="shipments">
                <i class="fas fa-shipping-fast"></i>
                <span>Envíos</span>
            </a>
            <a href="#clients" class="menu-item" data-section="clients">
                <i class="fas fa-users"></i>
                <span>Clientes</span>
            </a>
            <a href="#suppliers" class="menu-item" data-section="suppliers">
                <i class="fas fa-truck"></i>
                <span>Proveedores</span>
            </a>
            <a href="#reports" class="menu-item" data-section="reports">
                <i class="fas fa-chart-bar"></i>
                <span>Reportes</span>
            </a>
        </div>
    </div>

    <!-- Páginas independientes -->
    
    <!-- Dashboard -->
    <div id="dashboard-page" class="full-page active">
        <div class="header">
            <h1><i class="fas fa-tachometer-alt"></i> Dashboard</h1>
            <div class="user-info">
                <div class="notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </div>
                <div class="user-avatar">AU</div>
            </div>
        </div>

        <div class="dashboard-cards">
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Productos en Inventario</div>
                        <div class="card-value" id="inventory-count">0</div>
                    </div>
                    <div class="card-icon inventory">
                        <i class="fas fa-boxes"></i>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Envíos Pendientes</div>
                        <div class="card-value" id="pending-count">0</div>
                    </div>
                    <div class="card-icon pending">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Envíos en Tránsito</div>
                        <div class="card-value" id="transit-count">0</div>
                    </div>
                    <div class="card-icon transit">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Envíos Entregados</div>
                        <div class="card-value" id="delivered-count">0</div>
                    </div>
                    <div class="card-icon delivered">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Clientes Registrados</div>
                        <div class="card-value" id="clients-count">0</div>
                    </div>
                    <div class="card-icon customers">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Productos Favoritos</div>
                        <div class="card-value" id="favorites-count">0</div>
                    </div>
                    <div class="card-icon favorites">
                        <i class="fas fa-star"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> Resumen Reciente</h2>
            <p>Bienvenido al sistema de administración de CITAM. Aquí puedes gestionar inventario, envíos, clientes y proveedores.</p>
            <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px; background: rgba(67, 97, 238, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 10px;">Últimos Envíos</h3>
                    <ul id="recent-shipments" style="list-style: none;">
                        <!-- Últimos envíos se agregarán aquí -->
                    </ul>
                </div>
                <div style="flex: 1; min-width: 300px; background: rgba(76, 201, 240, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--success-color);">
                    <h3 style="color: var(--success-color); margin-bottom: 10px;">Productos con Bajo Stock</h3>
                    <ul id="low-stock" style="list-style: none;">
                        <!-- Productos con bajo stock se agregarán aquí -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Inventario -->
    <div id="inventory-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-boxes"></i> Inventario</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-plus-circle"></i> Agregar Producto</h2>
            <form id="inventory-form">
                <div class="form-group">
                    <label for="product-name">Nombre del Producto</label>
                    <input type="text" id="product-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="product-code">Código</label>
                    <input type="text" id="product-code" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="product-description">Descripción</label>
                    <textarea id="product-description" class="form-control" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="product-quantity">Cantidad</label>
                    <input type="number" id="product-quantity" class="form-control" required min="0">
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Agregar Producto
                </button>
            </form>
        </div>

        <div class="section-content" style="margin-top: 20px;">
            <h2 class="section-title"><i class="fas fa-list"></i> Listado de Productos</h2>
            <table class="table" id="inventory-table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Código</th>
                        <th>Cantidad</th>
                        <th>Favorito</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="inventory-list">
                    <!-- Los productos se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Favoritos -->
    <div id="favorites-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-star"></i> Productos Favoritos</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-heart"></i> Mis Favoritos</h2>
            <div class="favorites-grid" id="favorites-list">
                <!-- Los productos favoritos se mostrarán aquí -->
            </div>
        </div>
    </div>

    <!-- Envíos -->
    <div id="shipments-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-shipping-fast"></i> Envíos</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-plus-circle"></i> Crear Nuevo Envío</h2>
            <form id="shipment-form">
                <div class="form-group">
                    <label for="tracking-number">Número de Guía</label>
                    <input type="text" id="tracking-number" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="shipment-client">Cliente</label>
                    <select id="shipment-client" class="form-control" required>
                        <option value="">Seleccionar cliente...</option>
                        <!-- Los clientes se agregarán aquí dinámicamente -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="shipment-destination">Destino</label>
                    <input type="text" id="shipment-destination" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="shipment-products">Productos (separados por coma)</label>
                    <input type="text" id="shipment-products" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="shipment-status">Estado</label>
                    <select id="shipment-status" class="form-control" required>
                        <option value="Pendiente">Pendiente</option>
                        <option value="En Tránsito">En Tránsito</option>
                        <option value="Entregado">Entregado</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Registrar Envío
                </button>
            </form>
        </div>

        <div class="section-content" style="margin-top: 20px;">
            <h2 class="section-title"><i class="fas fa-list"></i> Listado de Envíos</h2>
            <table class="table" id="shipments-table">
                <thead>
                    <tr>
                        <th>Guía</th>
                        <th>Cliente</th>
                        <th>Destino</th>
                        <th>Productos</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="shipments-list">
                    <!-- Los envíos se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Clientes -->
    <div id="clients-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-users"></i> Clientes</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-plus-circle"></i> Agregar Cliente</h2>
            <form id="client-form">
                <div class="form-group">
                    <label for="client-name">Nombre</label>
                    <input type="text" id="client-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="client-email">Email</label>
                    <input type="email" id="client-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="client-phone">Teléfono</label>
                    <input type="tel" id="client-phone" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Agregar Cliente
                </button>
            </form>
        </div>

        <div class="section-content" style="margin-top: 20px;">
            <h2 class="section-title"><i class="fas fa-list"></i> Listado de Clientes</h2>
            <table class="table" id="clients-table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Email</th>
                        <th>Teléfono</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="clients-list">
                    <!-- Los clientes se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Proveedores -->
    <div id="suppliers-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-truck"></i> Proveedores</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-plus-circle"></i> Agregar Proveedor</h2>
            <form id="supplier-form">
                <div class="form-group">
                    <label for="supplier-name">Nombre</label>
                    <input type="text" id="supplier-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="supplier-contact">Contacto</label>
                    <input type="text" id="supplier-contact" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="supplier-phone">Teléfono</label>
                    <input type="tel" id="supplier-phone" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Agregar Proveedor
                </button>
            </form>
        </div>

        <div class="section-content" style="margin-top: 20px;">
            <h2 class="section-title"><i class="fas fa-list"></i> Listado de Proveedores</h2>
            <table class="table" id="suppliers-table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Contacto</th>
                        <th>Teléfono</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="suppliers-list">
                    <!-- Los proveedores se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Reportes -->
    <div id="reports-page" class="full-page">
        <div class="header">
            <h1><i class="fas fa-chart-bar"></i> Reportes</h1>
        </div>

        <div class="section-content">
            <h2 class="section-title"><i class="fas fa-file-alt"></i> Generar Reportes</h2>
            <div class="report-actions">
                <button id="inventory-report-btn" class="btn btn-primary">
                    <i class="fas fa-boxes"></i> Reporte de Inventario
                </button>
                <button id="shipments-report-btn" class="btn btn-primary">
                    <i class="fas fa-shipping-fast"></i> Reporte de Envíos
                </button>
                <button id="clients-report-btn" class="btn btn-primary">
                    <i class="fas fa-users"></i> Reporte de Clientes
                </button>
            </div>

            <div class="report-content" id="inventory-report" style="display: none;">
                <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                    <i class="fas fa-boxes"></i> Reporte de Inventario
                </h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Código</th>
                            <th>Descripción</th>
                            <th>Cantidad</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-report-list">
                        <!-- El reporte de inventario se generará aquí -->
                    </tbody>
                </table>
            </div>

            <div class="report-content" id="shipments-report" style="display: none;">
                <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                    <i class="fas fa-shipping-fast"></i> Reporte de Envíos
                </h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Guía</th>
                            <th>Cliente</th>
                            <th>Destino</th>
                            <th>Productos</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="shipments-report-list">
                        <!-- El reporte de envíos se generará aquí -->
                    </tbody>
                </table>
            </div>

            <div class="report-content" id="clients-report" style="display: none;">
                <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                    <i class="fas fa-users"></i> Reporte de Clientes
                </h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Teléfono</th>
                            <th>Envíos</th>
                        </tr>
                    </thead>
                    <tbody id="clients-report-list">
                        <!-- El reporte de clientes se generará aquí -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal de Edición -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Editar Elemento</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- El contenido del formulario de edición se cargará aquí -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline close-modal">Cancelar</button>
                <button class="btn btn-primary" id="saveChanges">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Datos persistentes en localStorage
        function loadData(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        }

        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        // Inicializar datos si no existen
        function initializeData() {
            if (!loadData('products')) {
                const defaultProducts = [
                    { id: 1, name: "Cajas de Cartón", code: "CTN-001", description: "Cajas para empaque estándar", quantity: 150, favorite: false },
                    { id: 2, name: "Bolsas de Plástico", code: "BPL-002", description: "Bolsas para protección", quantity: 200, favorite: true },
                    { id: 3, name: "Cinta de Embalaje", code: "CTP-003", description: "Cinta adhesiva para cierre de paquetes", quantity: 50, favorite: false }
                ];
                saveData('products', defaultProducts);
            }

            if (!loadData('clients')) {
                const defaultClients = [
                    { id: 1, name: "Importadora ABC", email: "contacto@importadoraabc.com", phone: "555-123-4567" },
                    { id: 2, name: "Exportadora XYZ", email: "ventas@exportadoraxyz.com", phone: "555-987-6543" },
                    { id: 3, name: "Distribuidora 123", email: "info@distribuidora123.com", phone: "555-456-7890" }
                ];
                saveData('clients', defaultClients);
            }

            if (!loadData('suppliers')) {
                const defaultSuppliers = [
                    { id: 1, name: "Proveedor de Materiales S.A.", contact: "Juan Pérez", phone: "555-111-2222" },
                    { id: 2, name: "Empaques Industriales", contact: "María Gómez", phone: "555-333-4444" }
                ];
                saveData('suppliers', defaultSuppliers);
            }

            if (!loadData('shipments')) {
                const defaultShipments = [
                    { 
                        id: 1, 
                        trackingNumber: "GUI-001", 
                        clientId: 1, 
                        destination: "Miami, USA", 
                        products: "CTN-001, BPL-002", 
                        status: "Entregado" 
                    },
                    { 
                        id: 2, 
                        trackingNumber: "GUI-002", 
                        clientId: 2, 
                        destination: "Buenos Aires, Argentina", 
                        products: "CTP-003", 
                        status: "En Tránsito" 
                    },
                    { 
                        id: 3, 
                        trackingNumber: "GUI-003", 
                        clientId: 3, 
                        destination: "Ciudad de México, México", 
                        products: "CTN-001, CTP-003", 
                        status: "Pendiente" 
                    }
                ];
                saveData('shipments', defaultShipments);
            }
        }

        // Variables para el seguimiento de IDs
        function getNextId(items) {
            return items.length > 0 ? Math.max(...items.map(item => item.id)) + 1 : 1;
        }

        // Funciones para manejar datos
        function getProducts() {
            return loadData('products') || [];
        }

        function getClients() {
            return loadData('clients') || [];
        }

        function getSuppliers() {
            return loadData('suppliers') || [];
        }

        function getShipments() {
            return loadData('shipments') || [];
        }

        function getFavorites() {
            const products = getProducts();
            return products.filter(product => product.favorite);
        }

        // Función para inicializar la aplicación
        function initApp() {
            initializeData();
            setupEventListeners();
            renderDashboard();
            renderInventoryList();
            renderClientsList();
            renderSuppliersList();
            renderShipmentsList();
            renderFavoritesList();
            populateClientDropdown();
            checkThemePreference();
            handleRouting();
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Formularios
            document.getElementById('inventory-form').addEventListener('submit', handleAddProduct);
            document.getElementById('client-form').addEventListener('submit', handleAddClient);
            document.getElementById('supplier-form').addEventListener('submit', handleAddSupplier);
            document.getElementById('shipment-form').addEventListener('submit', handleAddShipment);

            // Reportes
            document.getElementById('inventory-report-btn').addEventListener('click', generateInventoryReport);
            document.getElementById('shipments-report-btn').addEventListener('click', generateShipmentsReport);
            document.getElementById('clients-report-btn').addEventListener('click', generateClientsReport);

            // Tema oscuro/claro
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);

            // Modal
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', closeModal);
            });

            document.getElementById('saveChanges').addEventListener('click', saveEditedItem);

            // Cerrar modal haciendo clic fuera del contenido
            document.getElementById('editModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // Manejar clics en el menú
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    navigateTo(section);
                });
            });
        }

        // Manejar el enrutamiento
        function handleRouting() {
            window.addEventListener('popstate', function() {
                const hash = window.location.hash.substring(1) || 'dashboard';
                showPage(hash);
            });

            const initialHash = window.location.hash.substring(1) || 'dashboard';
            showPage(initialHash);
        }

        // Navegar a una página específica
        function navigateTo(page) {
            window.location.hash = page;
            showPage(page);
            updateActiveMenuItem(page);
        }

        // Mostrar la página correspondiente
        function showPage(page) {
            const pages = ['dashboard', 'inventory', 'favorites', 'shipments', 'clients', 'suppliers', 'reports'];
            
            // Ocultar todas las páginas
            pages.forEach(p => {
                const pageElement = document.getElementById(`${p}-page`);
                if (pageElement) {
                    pageElement.classList.remove('active');
                }
            });

            // Mostrar la página solicitada
            const activePage = document.getElementById(`${page}-page`);
            if (activePage) {
                activePage.classList.add('active');
            } else {
                // Si la página no existe, mostrar dashboard
                document.getElementById('dashboard-page').classList.add('active');
            }

            // Actualizar el contenido dinámico si es necesario
            if (page === 'dashboard') {
                renderDashboard();
            } else if (page === 'favorites') {
                renderFavoritesList();
            }
        }

        // Actualizar el elemento del menú activo
        function updateActiveMenuItem(page) {
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === page) {
                    item.classList.add('active');
                }
            });
        }

        // Renderizar dashboard
        function renderDashboard() {
            const products = getProducts();
            const clients = getClients();
            const shipments = getShipments();
            const favorites = getFavorites();
            
            document.getElementById('inventory-count').textContent = products.length;
            document.getElementById('clients-count').textContent = clients.length;
            document.getElementById('favorites-count').textContent = favorites.length;
            
            const pendingCount = shipments.filter(s => s.status === 'Pendiente').length;
            const transitCount = shipments.filter(s => s.status === 'En Tránsito').length;
            const deliveredCount = shipments.filter(s => s.status === 'Entregado').length;
            
            document.getElementById('pending-count').textContent = pendingCount;
            document.getElementById('transit-count').textContent = transitCount;
            document.getElementById('delivered-count').textContent = deliveredCount;

            // Últimos envíos
            const recentShipmentsList = document.getElementById('recent-shipments');
            recentShipmentsList.innerHTML = '';
            const recentShipments = shipments.slice(-3).reverse();
            
            recentShipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const li = document.createElement('li');
                li.style.marginBottom = '8px';
                li.style.display = 'flex';
                li.style.justifyContent = 'space-between';
                
                let statusClass = '';
                if (shipment.status === 'Pendiente') statusClass = 'status-pending';
                else if (shipment.status === 'En Tránsito') statusClass = 'status-transit';
                else if (shipment.status === 'Entregado') statusClass = 'status-delivered';
                
                li.innerHTML = `
                    <span>${shipment.trackingNumber} - ${client ? client.name : 'Cliente desconocido'}</span>
                    <span class="${statusClass}" style="border-radius: 12px; padding: 2px 8px; font-size: 12px;">${shipment.status}</span>
                `;
                recentShipmentsList.appendChild(li);
            });

            // Productos con bajo stock
            const lowStockList = document.getElementById('low-stock');
            lowStockList.innerHTML = '';
            const lowStockProducts = products.filter(p => p.quantity < 20);
            
            if (lowStockProducts.length === 0) {
                const li = document.createElement('li');
                li.textContent = 'No hay productos con bajo stock';
                li.style.fontStyle = 'italic';
                li.style.opacity = '0.7';
                lowStockList.appendChild(li);
            } else {
                lowStockProducts.forEach(product => {
                    const li = document.createElement('li');
                    li.style.marginBottom = '8px';
                    li.style.display = 'flex';
                    li.style.justifyContent = 'space-between';
                    li.innerHTML = `
                        <span>${product.name} (${product.code})</span>
                        <span style="color: ${product.quantity < 10 ? '#e63946' : '#f8961e'}; font-weight: 500;">${product.quantity} unidades</span>
                    `;
                    lowStockList.appendChild(li);
                });
            }
        }

        // Manejar agregar producto
        function handleAddProduct(e) {
            e.preventDefault();
            
            const name = document.getElementById('product-name').value;
            const code = document.getElementById('product-code').value;
            const description = document.getElementById('product-description').value;
            const quantity = parseInt(document.getElementById('product-quantity').value);
            
            const products = getProducts();
            const newProduct = {
                id: getNextId(products),
                name,
                code,
                description,
                quantity,
                favorite: false
            };
            
            products.push(newProduct);
            saveData('products', products);
            
            renderInventoryList();
            renderDashboard();
            renderFavoritesList();
            document.getElementById('inventory-form').reset();
            
            showToast('Producto agregado correctamente');
        }

        // Renderizar lista de productos
        function renderInventoryList() {
            const products = getProducts();
            const tbody = document.getElementById('inventory-list');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.code}</td>
                    <td>${product.quantity}</td>
                    <td>
                        <i class="fas fa-star favorite-icon ${product.favorite ? 'active' : ''}" 
                           onclick="toggleFavorite(${product.id})"
                           style="color: ${product.favorite ? '#ffd700' : '#ccc'}; cursor: pointer;"></i>
                    </td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('product', ${product.id})">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('product', ${product.id})">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Alternar producto favorito
        function toggleFavorite(productId) {
            const products = getProducts();
            const productIndex = products.findIndex(p => p.id === productId);
            
            if (productIndex !== -1) {
                products[productIndex].favorite = !products[productIndex].favorite;
                saveData('products', products);
                renderInventoryList();
                renderFavoritesList();
                renderDashboard();
                
                const message = products[productIndex].favorite 
                    ? 'Producto agregado a favoritos' 
                    : 'Producto removido de favoritos';
                showToast(message);
            }
        }

        // Renderizar lista de favoritos
        function renderFavoritesList() {
            const favorites = getFavorites();
            const container = document.getElementById('favorites-list');
            container.innerHTML = '';
            
            if (favorites.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-star"></i>
                    <p>No tienes productos favoritos aún</p>
                    <p style="font-size: 14px; margin-top: 10px;">Agrega productos a favoritos desde la sección de Inventario</p>
                `;
                container.appendChild(emptyState);
                return;
            }
            
            favorites.forEach(product => {
                const item = document.createElement('div');
                item.className = 'favorite-item';
                item.innerHTML = `
                    <i class="fas fa-times remove-favorite" onclick="toggleFavorite(${product.id})"></i>
                    <h3>${product.name}</h3>
                    <p><strong>Código:</strong> ${product.code}</p>
                    <p><strong>Cantidad:</strong> ${product.quantity}</p>
                    <p style="margin-top: 10px; font-size: 13px;">${product.description || 'Sin descripción'}</p>
                `;
                container.appendChild(item);
            });
        }

        // Manejar agregar cliente
        function handleAddClient(e) {
            e.preventDefault();
            
            const name = document.getElementById('client-name').value;
            const email = document.getElementById('client-email').value;
            const phone = document.getElementById('client-phone').value;
            
            const clients = getClients();
            const newClient = {
                id: getNextId(clients),
                name,
                email,
                phone
            };
            
            clients.push(newClient);
            saveData('clients', clients);
            
            renderClientsList();
            renderDashboard();
            populateClientDropdown();
            document.getElementById('client-form').reset();
            
            showToast('Cliente agregado correctamente');
        }

        // Renderizar lista de clientes
        function renderClientsList() {
            const clients = getClients();
            const tbody = document.getElementById('clients-list');
            tbody.innerHTML = '';
            
            clients.forEach(client => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('client', ${client.id})">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('client', ${client.id})">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Manejar agregar proveedor
        function handleAddSupplier(e) {
            e.preventDefault();
            
            const name = document.getElementById('supplier-name').value;
            const contact = document.getElementById('supplier-contact').value;
            const phone = document.getElementById('supplier-phone').value;
            
            const suppliers = getSuppliers();
            const newSupplier = {
                id: getNextId(suppliers),
                name,
                contact,
                phone
            };
            
            suppliers.push(newSupplier);
            saveData('suppliers', suppliers);
            
            renderSuppliersList();
            document.getElementById('supplier-form').reset();
            
            showToast('Proveedor agregado correctamente');
        }

        // Renderizar lista de proveedores
        function renderSuppliersList() {
            const suppliers = getSuppliers();
            const tbody = document.getElementById('suppliers-list');
            tbody.innerHTML = '';
            
            suppliers.forEach(supplier => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${supplier.name}</td>
                    <td>${supplier.contact}</td>
                    <td>${supplier.phone}</td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('supplier', ${supplier.id})">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('supplier', ${supplier.id})">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Manejar agregar envío
        function handleAddShipment(e) {
            e.preventDefault();
            
            const trackingNumber = document.getElementById('tracking-number').value;
            const clientId = parseInt(document.getElementById('shipment-client').value);
            const destination = document.getElementById('shipment-destination').value;
            const productsList = document.getElementById('shipment-products').value;
            const status = document.getElementById('shipment-status').value;
            
            const shipments = getShipments();
            const newShipment = {
                id: getNextId(shipments),
                trackingNumber,
                clientId,
                destination,
                products: productsList,
                status
            };
            
            shipments.push(newShipment);
            saveData('shipments', shipments);
            
            renderShipmentsList();
            renderDashboard();
            document.getElementById('shipment-form').reset();
            
            showToast('Envío registrado correctamente');
        }

        // Renderizar lista de envíos
        function renderShipmentsList() {
            const shipments = getShipments();
            const clients = getClients();
            const tbody = document.getElementById('shipments-list');
            tbody.innerHTML = '';
            
            shipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const clientName = client ? client.name : 'Cliente desconocido';
                
                let statusClass = '';
                if (shipment.status === 'Pendiente') statusClass = 'status-pending';
                else if (shipment.status === 'En Tránsito') statusClass = 'status-transit';
                else if (shipment.status === 'Entregado') statusClass = 'status-delivered';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${shipment.trackingNumber}</td>
                    <td>${clientName}</td>
                    <td>${shipment.destination}</td>
                    <td>${shipment.products}</td>
                    <td><span class="status-badge ${statusClass}">${shipment.status}</span></td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('shipment', ${shipment.id})">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('shipment', ${shipment.id})">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Llenar dropdown de clientes en formulario de envíos
        function populateClientDropdown() {
            const clients = getClients();
            const select = document.getElementById('shipment-client');
            select.innerHTML = '<option value="">Seleccionar cliente...</option>';
            
            clients.forEach(client => {
                const option = document.createElement('option');
                option.value = client.id;
                option.textContent = client.name;
                select.appendChild(option);
            });
        }

        // Editar elemento
        function editItem(type, id) {
            let item, title, formHtml;
            
            switch (type) {
                case 'product':
                    const products = getProducts();
                    item = products.find(p => p.id === id);
                    title = 'Editar Producto';
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">Nombre del Producto</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-code">Código</label>
                                <input type="text" id="edit-code" class="form-control" value="${item.code}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-quantity">Cantidad</label>
                                <input type="number" id="edit-quantity" class="form-control" value="${item.quantity}" required min="0">
                            </div>
                            <div class="form-group full-width">
                                <label for="edit-description">Descripción</label>
                                <textarea id="edit-description" class="form-control" rows="3">${item.description || ''}</textarea>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'client':
                    const clients = getClients();
                    item = clients.find(c => c.id === id);
                    title = 'Editar Cliente';
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">Nombre</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-email">Email</label>
                                <input type="email" id="edit-email" class="form-control" value="${item.email}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-phone">Teléfono</label>
                                <input type="tel" id="edit-phone" class="form-control" value="${item.phone}" required>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    item = suppliers.find(s => s.id === id);
                    title = 'Editar Proveedor';
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">Nombre</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-contact">Contacto</label>
                                <input type="text" id="edit-contact" class="form-control" value="${item.contact}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-phone">Teléfono</label>
                                <input type="tel" id="edit-phone" class="form-control" value="${item.phone}" required>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'shipment':
                    const shipments = getShipments();
                    const allClients = getClients();
                    item = shipments.find(s => s.id === id);
                    title = 'Editar Envío';
                    
                    let clientOptions = '';
                    allClients.forEach(client => {
                        const selected = client.id === item.clientId ? 'selected' : '';
                        clientOptions += `<option value="${client.id}" ${selected}>${client.name}</option>`;
                    });
                    
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-tracking">Número de Guía</label>
                                <input type="text" id="edit-tracking" class="form-control" value="${item.trackingNumber}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-client">Cliente</label>
                                <select id="edit-client" class="form-control" required>
                                    <option value="">Seleccionar cliente...</option>
                                    ${clientOptions}
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-destination">Destino</label>
                                <input type="text" id="edit-destination" class="form-control" value="${item.destination}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-products">Productos</label>
                                <input type="text" id="edit-products" class="form-control" value="${item.products}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-status">Estado</label>
                                <select id="edit-status" class="form-control" required>
                                    <option value="Pendiente" ${item.status === 'Pendiente' ? 'selected' : ''}>Pendiente</option>
                                    <option value="En Tránsito" ${item.status === 'En Tránsito' ? 'selected' : ''}>En Tránsito</option>
                                    <option value="Entregado" ${item.status === 'Entregado' ? 'selected' : ''}>Entregado</option>
                                </select>
                            </div>
                        </div>
                    `;
                    break;
                    
                default:
                    return;
            }
            
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = formHtml;
            document.getElementById('editModal').style.display = 'flex';
            
            // Guardar el tipo y ID del elemento que se está editando
            document.getElementById('saveChanges').dataset.type = type;
            document.getElementById('saveChanges').dataset.id = id;
        }

        // Guardar cambios en la edición
        function saveEditedItem() {
            const type = this.dataset.type;
            const id = parseInt(this.dataset.id);
            
            switch (type) {
                case 'product':
                    const products = getProducts();
                    const productIndex = products.findIndex(p => p.id === id);
                    
                    if (productIndex !== -1) {
                        products[productIndex] = {
                            ...products[productIndex],
                            name: document.getElementById('edit-name').value,
                            code: document.getElementById('edit-code').value,
                            quantity: parseInt(document.getElementById('edit-quantity').value),
                            description: document.getElementById('edit-description').value
                        };
                        
                        saveData('products', products);
                        renderInventoryList();
                        renderFavoritesList();
                        showToast('Producto actualizado correctamente');
                    }
                    break;
                    
                case 'client':
                    const clients = getClients();
                    const clientIndex = clients.findIndex(c => c.id === id);
                    
                    if (clientIndex !== -1) {
                        clients[clientIndex] = {
                            ...clients[clientIndex],
                            name: document.getElementById('edit-name').value,
                            email: document.getElementById('edit-email').value,
                            phone: document.getElementById('edit-phone').value
                        };
                        
                        saveData('clients', clients);
                        renderClientsList();
                        populateClientDropdown();
                        renderShipmentsList();
                        showToast('Cliente actualizado correctamente');
                    }
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    const supplierIndex = suppliers.findIndex(s => s.id === id);
                    
                    if (supplierIndex !== -1) {
                        suppliers[supplierIndex] = {
                            ...suppliers[supplierIndex],
                            name: document.getElementById('edit-name').value,
                            contact: document.getElementById('edit-contact').value,
                            phone: document.getElementById('edit-phone').value
                        };
                        
                        saveData('suppliers', suppliers);
                        renderSuppliersList();
                        showToast('Proveedor actualizado correctamente');
                    }
                    break;
                    
                case 'shipment':
                    const shipments = getShipments();
                    const shipmentIndex = shipments.findIndex(s => s.id === id);
                    
                    if (shipmentIndex !== -1) {
                        shipments[shipmentIndex] = {
                            ...shipments[shipmentIndex],
                            trackingNumber: document.getElementById('edit-tracking').value,
                            clientId: parseInt(document.getElementById('edit-client').value),
                            destination: document.getElementById('edit-destination').value,
                            products: document.getElementById('edit-products').value,
                            status: document.getElementById('edit-status').value
                        };
                        
                        saveData('shipments', shipments);
                        renderShipmentsList();
                        renderDashboard();
                        showToast('Envío actualizado correctamente');
                    }
                    break;
            }
            
            closeModal();
        }

        // Eliminar elemento
        function deleteItem(type, id) {
            if (!confirm('¿Estás seguro de eliminar este elemento?')) return;
            
            switch (type) {
                case 'product':
                    let products = getProducts();
                    products = products.filter(p => p.id !== id);
                    saveData('products', products);
                    renderInventoryList();
                    renderFavoritesList();
                    renderDashboard();
                    showToast('Producto eliminado correctamente');
                    break;
                    
                case 'client':
                    const clients = getClients();
                    const shipments = getShipments();
                    
                    // Verificar si el cliente tiene envíos asociados
                    const hasShipments = shipments.some(s => s.clientId === id);
                    if (hasShipments) {
                        showToast('No se puede eliminar, el cliente tiene envíos asociados', true);
                        return;
                    }
                    
                    const updatedClients = clients.filter(c => c.id !== id);
                    saveData('clients', updatedClients);
                    renderClientsList();
                    populateClientDropdown();
                    renderDashboard();
                    showToast('Cliente eliminado correctamente');
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    const updatedSuppliers = suppliers.filter(s => s.id !== id);
                    saveData('suppliers', updatedSuppliers);
                    renderSuppliersList();
                    showToast('Proveedor eliminado correctamente');
                    break;
                    
                case 'shipment':
                    const updatedShipments = getShipments().filter(s => s.id !== id);
                    saveData('shipments', updatedShipments);
                    renderShipmentsList();
                    renderDashboard();
                    showToast('Envío eliminado correctamente');
                    break;
            }
        }

        // Cerrar modal
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Generar reporte de inventario
        function generateInventoryReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const products = getProducts();
            const tbody = document.getElementById('inventory-report-list');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.code}</td>
                    <td>${product.description || '-'}</td>
                    <td>${product.quantity}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('inventory-report').style.display = 'block';
        }

        // Generar reporte de envíos
        function generateShipmentsReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const shipments = getShipments();
            const clients = getClients();
            const tbody = document.getElementById('shipments-report-list');
            tbody.innerHTML = '';
            
            shipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const clientName = client ? client.name : 'Cliente desconocido';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${shipment.trackingNumber}</td>
                    <td>${clientName}</td>
                    <td>${shipment.destination}</td>
                    <td>${shipment.products}</td>
                    <td>${shipment.status}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('shipments-report').style.display = 'block';
        }

        // Generar reporte de clientes
        function generateClientsReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const clients = getClients();
            const shipments = getShipments();
            const tbody = document.getElementById('clients-report-list');
            tbody.innerHTML = '';
            
            clients.forEach(client => {
                const clientShipments = shipments.filter(s => s.clientId === client.id);
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td>${clientShipments.length}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('clients-report').style.display = 'block';
        }

        // Mostrar notificación toast
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${isError ? 'error' : ''}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Alternar tema oscuro/claro
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            saveData('darkMode', isDarkMode);
            
            const themeToggle = document.getElementById('themeToggle');
            if (isDarkMode) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Modo Claro</span>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Modo Oscuro</span>';
            }
        }

        // Verificar preferencia de tema
        function checkThemePreference() {
            const darkMode = loadData('darkMode');
            if (darkMode) {
                document.body.classList.add('dark-mode');
                const themeToggle = document.getElementById('themeToggle');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Modo Claro</span>';
            }
        }

        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>