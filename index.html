<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema CITAM - Consolidación de Carga</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --info-color: #4895ef;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --text-color: #333;
            --bg-color: #ffffff;
            --card-bg: #ffffff;
            --sidebar-bg: #2b2d42;
            --sidebar-text: #ffffff;
            --border-color: #e9ecef;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* Nuevas variables para el menú */
            --menu-item-bg: rgba(255, 255, 255, 0.05);
            --menu-item-hover-bg: rgba(255, 255, 255, 0.1);
            --menu-item-active-bg: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(247, 37, 133, 0.1));
            --menu-item-active-border: 4px solid var(--accent-color);
            --menu-item-text: rgba(255, 255, 255, 0.85);
            --menu-item-active-text: #ffffff;
            --menu-item-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --menu-item-hover-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            --menu-icon-color: var(--primary-color);
            --menu-icon-active-color: var(--accent-color);
        }
    
        .dark-mode {
            --primary-color: #4895ef;
            --secondary-color: #4361ee;
            --accent-color: #f72585;
            --light-color: #343a40;
            --dark-color: #f8f9fa;
            --text-color: #f8f9fa;
            --bg-color: #212529;
            --card-bg: #2b2d42;
            --sidebar-bg: #1a1a2e;
            --sidebar-text: #ffffff;
            --border-color: #495057;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            
            /* Ajustes para modo oscuro */
            --menu-item-bg: rgba(255, 255, 255, 0.08);
            --menu-item-hover-bg: rgba(255, 255, 255, 0.15);
            --menu-item-active-bg: linear-gradient(135deg, rgba(72, 149, 239, 0.2), rgba(247, 37, 133, 0.15));
        }
    
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    
        body {
            display: flex;
            min-height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: var(--transition);
        }

        /* Estilos para el login */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100vh;
            background-color: var(--bg-color);
            transition: var(--transition);
        }
        
        .login-box {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 400px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .login-box img {
            max-width: 70%;
            margin-bottom: 20px;
        }
        
        .login-box h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .login-form .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .login-form .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: var(--transition);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        
        .login-form .btn {
            width: 100%;
            margin-top: 10px;
        }

        /* Selector de idioma */
        .language-selector {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .language-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .language-btn:hover {
            transform: scale(1.1);
        }
        
        .language-options {
            position: absolute;
            bottom: 60px;
            right: 0;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
            display: none;
            width: 150px;
        }
        
        .language-options.show {
            display: block;
        }
        
        .language-option {
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .language-option:hover {
            background-color: var(--menu-item-hover-bg);
        }

        /* Reloj mundial */
        .world-clock {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .clock-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .clock-city {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .clock-time {
            font-size: 24px;
            font-weight: 700;
        }
        
        .clock-date {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }

        /* Clases utilitarias */
        .hidden {
            display: none;
        }
    
        /* Sidebar - Estilos mejorados */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: var(--transition);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
    
        .sidebar-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    
        .sidebar-header img {
            max-width: 70%;
            margin-bottom: 15px;
            border-radius: 8px;
        }
    
        .theme-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: var(--transition);
        }
    
        .theme-toggle:hover {
            background: var(--secondary-color);
        }
    
        .sidebar-menu {
            display: flex;
            flex-direction: column;
            padding: 15px 10px;
            gap: 8px;
        }
    
        .menu-item {
            padding: 14px 20px;
            margin: 0 10px;
            border-radius: 8px;
            color: var(--menu-item-text);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-left: 4px solid transparent;
            font-size: 15px;
            font-weight: 500;
            background: var(--menu-item-bg);
            box-shadow: var(--menu-item-shadow);
            animation: fadeInLeft 0.4s ease forwards;
            cursor: pointer;
            
            /* Efecto de borde animado */
            &::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 3px;
                height: 100%;
                background: var(--accent-color);
                transform: scaleY(0);
                transform-origin: bottom;
                transition: transform 0.3s ease;
            }
            
            i {
                font-size: 18px;
                width: 24px;
                text-align: center;
                margin-right: 15px;
                color: var(--menu-icon-color);
                transition: all 0.3s ease;
                position: relative;
                z-index: 1;
            }
            
            span {
                position: relative;
                z-index: 1;
                transition: transform 0.3s ease;
            }
            
            &:hover {
                color: var(--menu-item-active-text);
                transform: translateX(5px);
                background: var(--menu-item-hover-bg);
                box-shadow: var(--menu-item-hover-shadow);
                
                i {
                    color: var(--menu-icon-active-color);
                    transform: scale(1.1);
                }
                
                &::before {
                    transform: scaleY(1);
                }
            }
            
            &.active {
                background: var(--menu-item-active-bg);
                color: var(--menu-item-active-text);
                border-left: var(--menu-item-active-border);
                font-weight: 600;
                
                i {
                    color: var(--menu-icon-active-color);
                }
                
                &::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 3px;
                    height: 100%;
                    background: var(--accent-color);
                }
            }
        }
    
        /* Animación al cargar */
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    
        .menu-item:nth-child(1) { animation-delay: 0.1s; }
        .menu-item:nth-child(2) { animation-delay: 0.2s; }
        .menu-item:nth-child(3) { animation-delay: 0.3s; }
        .menu-item:nth-child(4) { animation-delay: 0.4s; }
        .menu-item:nth-child(5) { animation-delay: 0.5s; }
        .menu-item:nth-child(6) { animation-delay: 0.6s; }
        .menu-item:nth-child(7) { animation-delay: 0.7s; }
    
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 25px;
            transition: var(--transition);
        }
    
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
    
        .header h1 {
            color: var(--primary-color);
            font-size: 26px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
    
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
    
        .notifications {
            position: relative;
            cursor: pointer;
        }
    
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
    
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
    
        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }
    
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
    
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
    
        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }
    
        .card-icon.inventory {
            background-color: var(--info-color);
        }
    
        .card-icon.pending {
            background-color: var(--warning-color);
        }
    
        .card-icon.transit {
            background-color: var(--primary-color);
        }
    
        .card-icon.delivered {
            background-color: var(--success-color);
        }
    
        .card-icon.customers {
            background-color: var(--accent-color);
        }
    
        .card-icon.favorites {
            background-color: #7209b7;
        }
    
        .card-title {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 5px;
        }
    
        .card-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-color);
        }
    
        /* Section Content */
        .section-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
    
        .section-title {
            font-size: 22px;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
    
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
    
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: var(--transition);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
    
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
    
        /* Buttons */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
        }
    
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
        }
    
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
    
        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
    
        .btn-danger {
            background-color: var(--accent-color);
            color: white;
        }
    
        .btn-danger:hover {
            background-color: #d81159;
            transform: translateY(-2px);
        }
    
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
    
        .btn-success:hover {
            background-color: #3a86ff;
            transform: translateY(-2px);
        }
    
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
    
        .btn-warning:hover {
            background-color: #f3722c;
            transform: translateY(-2px);
        }
    
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
    
        .btn-outline:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }
    
        /* Tables */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 15px;
        }
    
        .table th, .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
    
        .table th {
            background-color: var(--light-color);
            color: var(--dark-color);
            font-weight: 600;
        }
    
        .table tr:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }
    
        /* Status Badges */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            display: inline-block;
        }
    
        .status-pending {
            background-color: rgba(248, 150, 30, 0.2);
            color: var(--warning-color);
        }
    
        .status-transit {
            background-color: rgba(67, 97, 238, 0.2);
            color: var(--primary-color);
        }
    
        .status-delivered {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success-color);
        }
    
        .favorite-icon {
            color: #ffd700;
            cursor: pointer;
            font-size: 18px;
            transition: var(--transition);
        }
    
        .favorite-icon:hover {
            transform: scale(1.2);
        }
    
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
        }
    
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
    
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s;
        }
    
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
    
        .modal-title {
            font-size: 20px;
            color: var(--primary-color);
            font-weight: 600;
        }
    
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
        }
    
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }
    
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                overflow: hidden;
            }
            .sidebar-header span {
                display: none;
            }
            .menu-item span {
                display: none;
            }
            .menu-item {
                justify-content: center;
                padding: 18px 0;
                margin: 4px 0;
                border-radius: 0;
            }
            .menu-item i {
                margin-right: 0;
                font-size: 20px;
            }
            .main-content {
                margin-left: 80px;
            }
            .sidebar-header img {
                max-width: 50px;
            }
            .theme-toggle span {
                display: none;
            }
            
            /* Ajustes para móvil del menú */
            .menu-item:hover {
                transform: none;
                background: var(--menu-item-hover-bg);
            }
            
            .menu-item.active {
                border-left: none;
                border-top: 3px solid var(--accent-color);
                background: var(--menu-item-hover-bg);
            }
        }
    
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr 1fr;
            }
            .header h1 {
                font-size: 22px;
            }
            .world-clock {
                grid-template-columns: 1fr 1fr;
            }
        }
    
        @media (max-width: 576px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            .main-content {
                padding: 15px;
            }
            .section-content {
                padding: 15px;
            }
            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }
            .btn {
                padding: 10px 15px;
            }
            .world-clock {
                grid-template-columns: 1fr;
            }
            .login-box {
                padding: 25px;
            }
        }
    
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
    
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }
    
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
    
        .toast.error {
            background-color: var(--accent-color);
        }
    
        /* Edit Modal */
        .edit-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
    
        .edit-form .form-group {
            margin-bottom: 15px;
        }
    
        .form-group.full-width {
            grid-column: span 2;
        }
    
        /* Favorites Section */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
    
        .favorite-item {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
        }
    
        .favorite-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
    
        .favorite-item .remove-favorite {
            position: absolute;
            top: 10px;
            right: 10px;
            color: var(--accent-color);
            cursor: pointer;
            opacity: 0;
            transition: var(--transition);
        }
    
        .favorite-item:hover .remove-favorite {
            opacity: 1;
        }
    
        .favorite-item h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
            font-size: 16px;
        }
    
        .favorite-item p {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 5px;
        }
    
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-color);
            opacity: 0.7;
            grid-column: span 3;
        }
    
        .empty-state i {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
    
        .empty-state p {
            font-size: 16px;
        }
    
        /* Página independiente */
        .full-page {
            display: none;
            width: 100%;
            min-height: 100vh;
            padding: 25px;
            margin-left: 280px;
        }
    
        .full-page.active {
            display: block;
        }
    
        @media (max-width: 992px) {
            .full-page {
                margin-left: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="login-page" class="login-container">
        <div class="login-box">
            <img src="https://citam.net/wp-content/uploads/2020/11/citam.png" alt="CITAM Logo">
            <h2 id="login-title">Iniciar Sesión</h2>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username" id="username-label">Usuario</label>
                    <input type="text" id="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="password" id="password-label">Contraseña</label>
                    <input type="password" id="password" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" id="login-btn">
                    <i class="fas fa-sign-in-alt"></i> <span id="login-btn-text">Ingresar</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Aplicación principal (oculta inicialmente) -->
    <div id="app-container" class="hidden">
        <!-- Barra lateral de navegación -->
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="https://citam.net/wp-content/uploads/2020/11/citam.png" alt="CITAM Logo">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                    <span id="theme-toggle-text">Modo Oscuro</span>
                </button>
            </div>
            <div class="sidebar-menu">
                <a href="#dashboard" class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span id="menu-dashboard">Dashboard</span>
                </a>
                <a href="#inventory" class="menu-item" data-section="inventory">
                    <i class="fas fa-boxes"></i>
                    <span id="menu-inventory">Inventario</span>
                </a>
                <a href="#favorites" class="menu-item" data-section="favorites">
                    <i class="fas fa-star"></i>
                    <span id="menu-favorites">Favoritos</span>
                </a>
                <a href="#shipments" class="menu-item" data-section="shipments">
                    <i class="fas fa-shipping-fast"></i>
                    <span id="menu-shipments">Envíos</span>
                </a>
                <a href="#clients" class="menu-item" data-section="clients">
                    <i class="fas fa-users"></i>
                    <span id="menu-clients">Clientes</span>
                </a>
                <a href="#suppliers" class="menu-item" data-section="suppliers">
                    <i class="fas fa-truck"></i>
                    <span id="menu-suppliers">Proveedores</span>
                </a>
                <a href="#reports" class="menu-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span id="menu-reports">Reportes</span>
                </a>
            </div>
        </div>

        <!-- Páginas independientes -->
        
        <!-- Dashboard -->
        <div id="dashboard-page" class="full-page active">
            <div class="header">
                <h1><i class="fas fa-tachometer-alt"></i> <span id="dashboard-title">Dashboard</span></h1>
                <div class="user-info">
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="user-avatar">AU</div>
                </div>
            </div>

            <div class="dashboard-cards">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="inventory-card-title">Productos en Inventario</div>
                            <div class="card-value" id="inventory-count">0</div>
                        </div>
                        <div class="card-icon inventory">
                            <i class="fas fa-boxes"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="pending-card-title">Envíos Pendientes</div>
                            <div class="card-value" id="pending-count">0</div>
                        </div>
                        <div class="card-icon pending">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="transit-card-title">Envíos en Tránsito</div>
                            <div class="card-value" id="transit-count">0</div>
                        </div>
                        <div class="card-icon transit">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="delivered-card-title">Envíos Entregados</div>
                            <div class="card-value" id="delivered-count">0</div>
                        </div>
                        <div class="card-icon delivered">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="clients-card-title">Clientes Registrados</div>
                            <div class="card-value" id="clients-count">0</div>
                        </div>
                        <div class="card-icon customers">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title" id="favorites-card-title">Productos Favoritos</div>
                            <div class="card-value" id="favorites-count">0</div>
                        </div>
                        <div class="card-icon favorites">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-chart-line"></i> <span id="summary-title">Resumen Reciente</span></h2>
                <p id="welcome-message">Bienvenido al sistema de administración de CITAM. Aquí puedes gestionar inventario, envíos, clientes y proveedores.</p>
                
                <!-- Reloj Mundial -->
                <div style="margin-top: 30px;">
                    <h3 class="section-title"><i class="fas fa-globe"></i> <span id="world-clock-title">Reloj Mundial</span></h3>
                    <div class="world-clock" id="world-clock">
                        <!-- Los relojes se agregarán aquí dinámicamente -->
                    </div>
                </div>
                
                <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 300px; background: rgba(67, 97, 238, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <h3 style="color: var(--primary-color); margin-bottom: 10px;" id="last-shipments-title">Últimos Envíos</h3>
                        <ul id="recent-shipments" style="list-style: none;">
                            <!-- Últimos envíos se agregarán aquí -->
                        </ul>
                    </div>
                    <div style="flex: 1; min-width: 300px; background: rgba(76, 201, 240, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--success-color);">
                        <h3 style="color: var(--success-color); margin-bottom: 10px;" id="low-stock-title">Productos con Bajo Stock</h3>
                        <ul id="low-stock" style="list-style: none;">
                            <!-- Productos con bajo stock se agregarán aquí -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventario -->
        <div id="inventory-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-boxes"></i> <span id="inventory-title">Inventario</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-plus-circle"></i> <span id="add-product-title">Agregar Producto</span></h2>
                <form id="inventory-form">
                    <div class="form-group">
                        <label for="product-name" id="product-name-label">Nombre del Producto</label>
                        <input type="text" id="product-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-code" id="product-code-label">Código</label>
                        <input type="text" id="product-code" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-description" id="product-description-label">Descripción</label>
                        <textarea id="product-description" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="product-quantity" id="product-quantity-label">Cantidad</label>
                        <input type="number" id="product-quantity" class="form-control" required min="0">
                    </div>
                    <button type="submit" class="btn btn-primary" id="add-product-btn">
                        <i class="fas fa-save"></i> <span id="add-product-btn-text">Agregar Producto</span>
                    </button>
                </form>
            </div>

            <div class="section-content" style="margin-top: 20px;">
                <h2 class="section-title"><i class="fas fa-list"></i> <span id="product-list-title">Listado de Productos</span></h2>
                <table class="table" id="inventory-table">
                    <thead>
                        <tr>
                            <th id="product-name-header">Nombre</th>
                            <th id="product-code-header">Código</th>
                            <th id="product-quantity-header">Cantidad</th>
                            <th id="product-favorite-header">Favorito</th>
                            <th id="product-actions-header">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-list">
                        <!-- Los productos se agregarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Favoritos -->
        <div id="favorites-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-star"></i> <span id="favorites-title">Productos Favoritos</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-heart"></i> <span id="my-favorites-title">Mis Favoritos</span></h2>
                <div class="favorites-grid" id="favorites-list">
                    <!-- Los productos favoritos se mostrarán aquí -->
                </div>
            </div>
        </div>

        <!-- Envíos -->
        <div id="shipments-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-shipping-fast"></i> <span id="shipments-title">Envíos</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-plus-circle"></i> <span id="new-shipment-title">Crear Nuevo Envío</span></h2>
                <form id="shipment-form">
                    <div class="form-group">
                        <label for="tracking-number" id="tracking-number-label">Número de Guía</label>
                        <input type="text" id="tracking-number" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="shipment-client" id="shipment-client-label">Cliente</label>
                        <select id="shipment-client" class="form-control" required>
                            <option value="">Seleccionar cliente...</option>
                            <!-- Los clientes se agregarán aquí dinámicamente -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="shipment-destination" id="shipment-destination-label">Destino</label>
                        <input type="text" id="shipment-destination" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="shipment-products" id="shipment-products-label">Productos (separados por coma)</label>
                        <input type="text" id="shipment-products" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="shipment-status" id="shipment-status-label">Estado</label>
                        <select id="shipment-status" class="form-control" required>
                            <option value="Pendiente">Pendiente</option>
                            <option value="En Tránsito">En Tránsito</option>
                            <option value="Entregado">Entregado</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" id="register-shipment-btn">
                        <i class="fas fa-save"></i> <span id="register-shipment-btn-text">Registrar Envío</span>
                    </button>
                </form>
            </div>

            <div class="section-content" style="margin-top: 20px;">
                <h2 class="section-title"><i class="fas fa-list"></i> <span id="shipment-list-title">Listado de Envíos</span></h2>
                <table class="table" id="shipments-table">
                    <thead>
                        <tr>
                            <th id="shipment-guide-header">Guía</th>
                            <th id="shipment-client-header">Cliente</th>
                            <th id="shipment-destination-header">Destino</th>
                            <th id="shipment-products-header">Productos</th>
                            <th id="shipment-status-header">Estado</th>
                            <th id="shipment-actions-header">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="shipments-list">
                        <!-- Los envíos se agregarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Clientes -->
        <div id="clients-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-users"></i> <span id="clients-title">Clientes</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-plus-circle"></i> <span id="add-client-title">Agregar Cliente</span></h2>
                <form id="client-form">
                    <div class="form-group">
                        <label for="client-name" id="client-name-label">Nombre</label>
                        <input type="text" id="client-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="client-email" id="client-email-label">Email</label>
                        <input type="email" id="client-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="client-phone" id="client-phone-label">Teléfono</label>
                        <input type="tel" id="client-phone" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" id="add-client-btn">
                        <i class="fas fa-save"></i> <span id="add-client-btn-text">Agregar Cliente</span>
                    </button>
                </form>
            </div>

            <div class="section-content" style="margin-top: 20px;">
                <h2 class="section-title"><i class="fas fa-list"></i> <span id="client-list-title">Listado de Clientes</span></h2>
                <table class="table" id="clients-table">
                    <thead>
                        <tr>
                            <th id="client-name-header">Nombre</th>
                            <th id="client-email-header">Email</th>
                            <th id="client-phone-header">Teléfono</th>
                            <th id="client-actions-header">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="clients-list">
                        <!-- Los clientes se agregarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Proveedores -->
        <div id="suppliers-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-truck"></i> <span id="suppliers-title">Proveedores</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-plus-circle"></i> <span id="add-supplier-title">Agregar Proveedor</span></h2>
                <form id="supplier-form">
                    <div class="form-group">
                        <label for="supplier-name" id="supplier-name-label">Nombre</label>
                        <input type="text" id="supplier-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="supplier-contact" id="supplier-contact-label">Contacto</label>
                        <input type="text" id="supplier-contact" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="supplier-phone" id="supplier-phone-label">Teléfono</label>
                        <input type="tel" id="supplier-phone" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" id="add-supplier-btn">
                        <i class="fas fa-save"></i> <span id="add-supplier-btn-text">Agregar Proveedor</span>
                    </button>
                </form>
            </div>

            <div class="section-content" style="margin-top: 20px;">
                <h2 class="section-title"><i class="fas fa-list"></i> <span id="supplier-list-title">Listado de Proveedores</span></h2>
                <table class="table" id="suppliers-table">
                    <thead>
                        <tr>
                            <th id="supplier-name-header">Nombre</th>
                            <th id="supplier-contact-header">Contacto</th>
                            <th id="supplier-phone-header">Teléfono</th>
                            <th id="supplier-actions-header">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="suppliers-list">
                        <!-- Los proveedores se agregarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reportes -->
        <div id="reports-page" class="full-page">
            <div class="header">
                <h1><i class="fas fa-chart-bar"></i> <span id="reports-title">Reportes</span></h1>
            </div>

            <div class="section-content">
                <h2 class="section-title"><i class="fas fa-file-alt"></i> <span id="generate-reports-title">Generar Reportes</span></h2>
                <div class="report-actions">
                    <button id="inventory-report-btn" class="btn btn-primary">
                        <i class="fas fa-boxes"></i> <span id="inventory-report-btn-text">Reporte de Inventario</span>
                    </button>
                    <button id="shipments-report-btn" class="btn btn-primary">
                        <i class="fas fa-shipping-fast"></i> <span id="shipments-report-btn-text">Reporte de Envíos</span>
                    </button>
                    <button id="clients-report-btn" class="btn btn-primary">
                        <i class="fas fa-users"></i> <span id="clients-report-btn-text">Reporte de Clientes</span>
                    </button>
                </div>

                <div class="report-content" id="inventory-report" style="display: none;">
                    <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                        <i class="fas fa-boxes"></i> <span id="inventory-report-title">Reporte de Inventario</span>
                    </h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th id="report-product-name-header">Nombre</th>
                                <th id="report-product-code-header">Código</th>
                                <th id="report-product-description-header">Descripción</th>
                                <th id="report-product-quantity-header">Cantidad</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-report-list">
                            <!-- El reporte de inventario se generará aquí -->
                        </tbody>
                    </table>
                </div>

                <div class="report-content" id="shipments-report" style="display: none;">
                    <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                        <i class="fas fa-shipping-fast"></i> <span id="shipments-report-title">Reporte de Envíos</span>
                    </h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th id="report-shipment-guide-header">Guía</th>
                                <th id="report-shipment-client-header">Cliente</th>
                                <th id="report-shipment-destination-header">Destino</th>
                                <th id="report-shipment-products-header">Productos</th>
                                <th id="report-shipment-status-header">Estado</th>
                            </tr>
                        </thead>
                        <tbody id="shipments-report-list">
                            <!-- El reporte de envíos se generará aquí -->
                        </tbody>
                    </table>
                </div>

                <div class="report-content" id="clients-report" style="display: none;">
                    <h3 style="margin: 20px 0 15px; color: var(--primary-color);">
                        <i class="fas fa-users"></i> <span id="clients-report-title">Reporte de Clientes</span>
                    </h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th id="report-client-name-header">Nombre</th>
                                <th id="report-client-email-header">Email</th>
                                <th id="report-client-phone-header">Teléfono</th>
                                <th id="report-client-shipments-header">Envios</th>
                            </tr>
                        </thead>
                        <tbody id="clients-report-list">
                            <!-- El reporte de clientes se generará aquí -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Modal de Edición -->
        <div class="modal" id="editModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalTitle">Editar Elemento</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- El contenido del formulario de edición se cargará aquí -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline close-modal" id="cancel-edit-btn">Cancelar</button>
                    <button class="btn btn-primary" id="saveChanges">Guardar Cambios</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>

        <!-- Selector de idioma -->
        <div class="language-selector">
            <button class="language-btn" id="language-btn">
                <i class="fas fa-globe"></i>
            </button>
            <div class="language-options" id="language-options">
                <div class="language-option" data-lang="es">
                    <span>🇪🇸</span> Español
                </div>
                <div class="language-option" data-lang="en">
                    <span>🇬🇧</span> English
                </div>
                <div class="language-option" data-lang="zh">
                    <span>🇨🇳</span> 中文 (Chino)
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos persistentes en localStorage
        function loadData(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        }

        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        // Inicializar datos si no existen
        function initializeData() {
            if (!loadData('products')) {
                const defaultProducts = [
                    { id: 1, name: "Cajas de Cartón", code: "CTN-001", description: "Cajas para empaque estándar", quantity: 150, favorite: false },
                    { id: 2, name: "Bolsas de Plástico", code: "BPL-002", description: "Bolsas para protección", quantity: 200, favorite: true },
                    { id: 3, name: "Cinta de Embalaje", code: "CTP-003", description: "Cinta adhesiva para cierre de paquetes", quantity: 50, favorite: false }
                ];
                saveData('products', defaultProducts);
            }

            if (!loadData('clients')) {
                const defaultClients = [
                    { id: 1, name: "Importadora ABC", email: "contacto@importadoraabc.com", phone: "555-123-4567" },
                    { id: 2, name: "Exportadora XYZ", email: "ventas@exportadoraxyz.com", phone: "555-987-6543" },
                    { id: 3, name: "Distribuidora 123", email: "info@distribuidora123.com", phone: "555-456-7890" }
                ];
                saveData('clients', defaultClients);
            }

            if (!loadData('suppliers')) {
                const defaultSuppliers = [
                    { id: 1, name: "Proveedor de Materiales S.A.", contact: "Juan Pérez", phone: "555-111-2222" },
                    { id: 2, name: "Empaques Industriales", contact: "María Gómez", phone: "555-333-4444" }
                ];
                saveData('suppliers', defaultSuppliers);
            }

            if (!loadData('shipments')) {
                const defaultShipments = [
                    { 
                        id: 1, 
                        trackingNumber: "GUI-001", 
                        clientId: 1, 
                        destination: "Miami, USA", 
                        products: "CTN-001, BPL-002", 
                        status: "Entregado" 
                    },
                    { 
                        id: 2, 
                        trackingNumber: "GUI-002", 
                        clientId: 2, 
                        destination: "Buenos Aires, Argentina", 
                        products: "CTP-003", 
                        status: "En Tránsito" 
                    },
                    { 
                        id: 3, 
                        trackingNumber: "GUI-003", 
                        clientId: 3, 
                        destination: "Ciudad de México, México", 
                        products: "CTN-001, CTP-003", 
                        status: "Pendiente" 
                    }
                ];
                saveData('shipments', defaultShipments);
            }

            if (!loadData('users')) {
                const defaultUsers = [
                    { username: "admin", password: "admin123", name: "Administrador" },
                    { username: "user", password: "user123", name: "Usuario" }
                ];
                saveData('users', defaultUsers);
            }
        }

        // Variables para el seguimiento de IDs
        function getNextId(items) {
            return items.length > 0 ? Math.max(...items.map(item => item.id)) + 1 : 1;
        }

        // Funciones para manejar datos
        function getProducts() {
            return loadData('products') || [];
        }

        function getClients() {
            return loadData('clients') || [];
        }

        function getSuppliers() {
            return loadData('suppliers') || [];
        }

        function getShipments() {
            return loadData('shipments') || [];
        }

        function getUsers() {
            return loadData('users') || [];
        }

        function getFavorites() {
            const products = getProducts();
            return products.filter(product => product.favorite);
        }

        // Traducciones
        const translations = {
            es: {
                login: {
                    title: "Iniciar Sesión",
                    username: "Usuario",
                    password: "Contraseña",
                    button: "Ingresar",
                    error: "Usuario o contraseña incorrectos",
                    welcome: "Bienvenido"
                },
                theme: {
                    dark: "Modo Oscuro",
                    light: "Modo Claro"
                },
                menu: {
                    dashboard: "Dashboard",
                    inventory: "Inventario",
                    favorites: "Favoritos",
                    shipments: "Envíos",
                    clients: "Clientes",
                    suppliers: "Proveedores",
                    reports: "Reportes"
                },
                dashboard: {
                    title: "Dashboard",
                    welcome: "Bienvenido al sistema de administración de CITAM. Aquí puedes gestionar inventario, envíos, clientes y proveedores.",
                    summary: "Resumen Reciente",
                    worldClock: "Reloj Mundial",
                    lastShipments: "Últimos Envíos",
                    lowStock: "Productos con Bajo Stock",
                    inventory: "Productos en Inventario",
                    pending: "Envíos Pendientes",
                    transit: "Envíos en Tránsito",
                    delivered: "Envíos Entregados",
                    clients: "Clientes Registrados",
                    favorites: "Productos Favoritos"
                },
                inventory: {
                    title: "Inventario",
                    addProduct: "Agregar Producto",
                    productName: "Nombre del Producto",
                    code: "Código",
                    description: "Descripción",
                    quantity: "Cantidad",
                    addButton: "Agregar Producto",
                    listTitle: "Listado de Productos",
                    nameHeader: "Nombre",
                    codeHeader: "Código",
                    quantityHeader: "Cantidad",
                    favoriteHeader: "Favorito",
                    actionsHeader: "Acciones"
                },
                favorites: {
                    title: "Productos Favoritos",
                    myFavorites: "Mis Favoritos",
                    emptyState: "No tienes productos favoritos aún",
                    emptyStateSub: "Agrega productos a favoritos desde la sección de Inventario"
                },
                shipments: {
                    title: "Envíos",
                    newShipment: "Crear Nuevo Envío",
                    trackingNumber: "Número de Guía",
                    client: "Cliente",
                    destination: "Destino",
                    products: "Productos (separados por coma)",
                    status: "Estado",
                    registerButton: "Registrar Envío",
                    listTitle: "Listado de Envíos",
                    guideHeader: "Guía",
                    clientHeader: "Cliente",
                    destinationHeader: "Destino",
                    productsHeader: "Productos",
                    statusHeader: "Estado",
                    actionsHeader: "Acciones",
                    pending: "Pendiente",
                    transit: "En Tránsito",
                    delivered: "Entregado"
                },
                clients: {
                    title: "Clientes",
                    addClient: "Agregar Cliente",
                    name: "Nombre",
                    email: "Email",
                    phone: "Teléfono",
                    addButton: "Agregar Cliente",
                    listTitle: "Listado de Clientes",
                    nameHeader: "Nombre",
                    emailHeader: "Email",
                    phoneHeader: "Teléfono",
                    actionsHeader: "Acciones"
                },
                suppliers: {
                    title: "Proveedores",
                    addSupplier: "Agregar Proveedor",
                    name: "Nombre",
                    contact: "Contacto",
                    phone: "Teléfono",
                    addButton: "Agregar Proveedor",
                    listTitle: "Listado de Proveedores",
                    nameHeader: "Nombre",
                    contactHeader: "Contacto",
                    phoneHeader: "Teléfono",
                    actionsHeader: "Acciones"
                },
                reports: {
                    title: "Reportes",
                    generateReports: "Generar Reportes",
                    inventoryReport: "Reporte de Inventario",
                    shipmentsReport: "Reporte de Envíos",
                    clientsReport: "Reporte de Clientes",
                    productNameHeader: "Nombre",
                    productCodeHeader: "Código",
                    productDescriptionHeader: "Descripción",
                    productQuantityHeader: "Cantidad",
                    shipmentGuideHeader: "Guía",
                    shipmentClientHeader: "Cliente",
                    shipmentDestinationHeader: "Destino",
                    shipmentProductsHeader: "Productos",
                    shipmentStatusHeader: "Estado",
                    clientNameHeader: "Nombre",
                    clientEmailHeader: "Email",
                    clientPhoneHeader: "Teléfono",
                    clientShipmentsHeader: "Envíos"
                },
                modal: {
                    editItem: "Editar Elemento",
                    cancel: "Cancelar",
                    saveChanges: "Guardar Cambios"
                },
                notifications: {
                    productAdded: "Producto agregado correctamente",
                    productUpdated: "Producto actualizado correctamente",
                    productDeleted: "Producto eliminado correctamente",
                    clientAdded: "Cliente agregado correctamente",
                    clientUpdated: "Cliente actualizado correctamente",
                    clientDeleted: "Cliente eliminado correctamente",
                    supplierAdded: "Proveedor agregado correctamente",
                    supplierUpdated: "Proveedor actualizado correctamente",
                    supplierDeleted: "Proveedor eliminado correctamente",
                    shipmentAdded: "Envío registrado correctamente",
                    shipmentUpdated: "Envío actualizado correctamente",
                    shipmentDeleted: "Envío eliminado correctamente",
                    favoriteAdded: "Producto agregado a favoritos",
                    favoriteRemoved: "Producto removido de favoritos",
                    cannotDeleteClient: "No se puede eliminar, el cliente tiene envíos asociados"
                },
                worldClock: {
                    newYork: "Nueva York",
                    london: "Londres",
                    tokyo: "Tokio",
                    beijing: "Beijing",
                    dubai: "Dubái",
                    sydney: "Sídney",
                    moscow: "Moscú",
                    mexicoCity: "Ciudad de México",
                    bogota: "Bogotá",
                    buenosAires: "Buenos Aires"
                }
            },
            en: {
                login: {
                    title: "Login",
                    username: "Username",
                    password: "Password",
                    button: "Sign In",
                    error: "Invalid username or password",
                    welcome: "Welcome"
                },
                theme: {
                    dark: "Dark Mode",
                    light: "Light Mode"
                },
                menu: {
                    dashboard: "Dashboard",
                    inventory: "Inventory",
                    favorites: "Favorites",
                    shipments: "Shipments",
                    clients: "Clients",
                    suppliers: "Suppliers",
                    reports: "Reports"
                },
                dashboard: {
                    title: "Dashboard",
                    welcome: "Welcome to CITAM management system. Here you can manage inventory, shipments, clients and suppliers.",
                    summary: "Recent Summary",
                    worldClock: "World Clock",
                    lastShipments: "Last Shipments",
                    lowStock: "Low Stock Products",
                    inventory: "Products in Inventory",
                    pending: "Pending Shipments",
                    transit: "Shipments in Transit",
                    delivered: "Delivered Shipments",
                    clients: "Registered Clients",
                    favorites: "Favorite Products"
                },
                inventory: {
                    title: "Inventory",
                    addProduct: "Add Product",
                    productName: "Product Name",
                    code: "Code",
                    description: "Description",
                    quantity: "Quantity",
                    addButton: "Add Product",
                    listTitle: "Products List",
                    nameHeader: "Name",
                    codeHeader: "Code",
                    quantityHeader: "Quantity",
                    favoriteHeader: "Favorite",
                    actionsHeader: "Actions"
                },
                favorites: {
                    title: "Favorite Products",
                    myFavorites: "My Favorites",
                    emptyState: "You don't have favorite products yet",
                    emptyStateSub: "Add products to favorites from the Inventory section"
                },
                shipments: {
                    title: "Shipments",
                    newShipment: "Create New Shipment",
                    trackingNumber: "Tracking Number",
                    client: "Client",
                    destination: "Destination",
                    products: "Products (comma separated)",
                    status: "Status",
                    registerButton: "Register Shipment",
                    listTitle: "Shipments List",
                    guideHeader: "Guide",
                    clientHeader: "Client",
                    destinationHeader: "Destination",
                    productsHeader: "Products",
                    statusHeader: "Status",
                    actionsHeader: "Actions",
                    pending: "Pending",
                    transit: "In Transit",
                    delivered: "Delivered"
                },
                clients: {
                    title: "Clients",
                    addClient: "Add Client",
                    name: "Name",
                    email: "Email",
                    phone: "Phone",
                    addButton: "Add Client",
                    listTitle: "Clients List",
                    nameHeader: "Name",
                    emailHeader: "Email",
                    phoneHeader: "Phone",
                    actionsHeader: "Actions"
                },
                suppliers: {
                    title: "Suppliers",
                    addSupplier: "Add Supplier",
                    name: "Name",
                    contact: "Contact",
                    phone: "Phone",
                    addButton: "Add Supplier",
                    listTitle: "Suppliers List",
                    nameHeader: "Name",
                    contactHeader: "Contact",
                    phoneHeader: "Phone",
                    actionsHeader: "Actions"
                },
                reports: {
                    title: "Reports",
                    generateReports: "Generate Reports",
                    inventoryReport: "Inventory Report",
                    shipmentsReport: "Shipments Report",
                    clientsReport: "Clients Report",
                    productNameHeader: "Name",
                    productCodeHeader: "Code",
                    productDescriptionHeader: "Description",
                    productQuantityHeader: "Quantity",
                    shipmentGuideHeader: "Guide",
                    shipmentClientHeader: "Client",
                    shipmentDestinationHeader: "Destination",
                    shipmentProductsHeader: "Products",
                    shipmentStatusHeader: "Status",
                    clientNameHeader: "Name",
                    clientEmailHeader: "Email",
                    clientPhoneHeader: "Phone",
                    clientShipmentsHeader: "Shipments"
                },
                modal: {
                    editItem: "Edit Item",
                    cancel: "Cancel",
                    saveChanges: "Save Changes"
                },
                notifications: {
                    productAdded: "Product added successfully",
                    productUpdated: "Product updated successfully",
                    productDeleted: "Product deleted successfully",
                    clientAdded: "Client added successfully",
                    clientUpdated: "Client updated successfully",
                    clientDeleted: "Client deleted successfully",
                    supplierAdded: "Supplier added successfully",
                    supplierUpdated: "Supplier updated successfully",
                    supplierDeleted: "Supplier deleted successfully",
                    shipmentAdded: "Shipment registered successfully",
                    shipmentUpdated: "Shipment updated successfully",
                    shipmentDeleted: "Shipment deleted successfully",
                    favoriteAdded: "Product added to favorites",
                    favoriteRemoved: "Product removed from favorites",
                    cannotDeleteClient: "Cannot delete, client has associated shipments"
                },
                worldClock: {
                    newYork: "New York",
                    london: "London",
                    tokyo: "Tokyo",
                    beijing: "Beijing",
                    dubai: "Dubai",
                    sydney: "Sydney",
                    moscow: "Moscow",
                    mexicoCity: "Mexico City",
                    bogota: "Bogotá",
                    buenosAires: "Buenos Aires"
                }
            },
            zh: {
                login: {
                    title: "登录",
                    username: "用户名",
                    password: "密码",
                    button: "登录",
                    error: "用户名或密码错误",
                    welcome: "欢迎"
                },
                theme: {
                    dark: "暗模式",
                    light: "亮模式"
                },
                menu: {
                    dashboard: "仪表板",
                    inventory: "库存",
                    favorites: "收藏夹",
                    shipments: "发货",
                    clients: "客户",
                    suppliers: "供应商",
                    reports: "报告"
                },
                dashboard: {
                    title: "仪表板",
                    welcome: "欢迎使用CITAM管理系统。在这里您可以管理库存、发货、客户和供应商。",
                    summary: "近期摘要",
                    worldClock: "世界时钟",
                    lastShipments: "最近发货",
                    lowStock: "低库存产品",
                    inventory: "库存产品",
                    pending: "待处理发货",
                    transit: "运输中的发货",
                    delivered: "已交付发货",
                    clients: "注册客户",
                    favorites: "收藏产品"
                },
                inventory: {
                    title: "库存",
                    addProduct: "添加产品",
                    productName: "产品名称",
                    code: "代码",
                    description: "描述",
                    quantity: "数量",
                    addButton: "添加产品",
                    listTitle: "产品列表",
                    nameHeader: "名称",
                    codeHeader: "代码",
                    quantityHeader: "数量",
                    favoriteHeader: "收藏",
                    actionsHeader: "操作"
                },
                favorites: {
                    title: "收藏产品",
                    myFavorites: "我的收藏",
                    emptyState: "您还没有收藏产品",
                    emptyStateSub: "从库存部分添加产品到收藏夹"
                },
                shipments: {
                    title: "发货",
                    newShipment: "创建新发货",
                    trackingNumber: "跟踪号码",
                    client: "客户",
                    destination: "目的地",
                    products: "产品（逗号分隔）",
                    status: "状态",
                    registerButton: "注册发货",
                    listTitle: "发货列表",
                    guideHeader: "指南",
                    clientHeader: "客户",
                    destinationHeader: "目的地",
                    productsHeader: "产品",
                    statusHeader: "状态",
                    actionsHeader: "操作",
                    pending: "待处理",
                    transit: "运输中",
                    delivered: "已交付"
                },
                clients: {
                    title: "客户",
                    addClient: "添加客户",
                    name: "姓名",
                    email: "电子邮件",
                    phone: "电话",
                    addButton: "添加客户",
                    listTitle: "客户列表",
                    nameHeader: "姓名",
                    emailHeader: "电子邮件",
                    phoneHeader: "电话",
                    actionsHeader: "操作"
                },
                suppliers: {
                    title: "供应商",
                    addSupplier: "添加供应商",
                    name: "姓名",
                    contact: "联系人",
                    phone: "电话",
                    addButton: "添加供应商",
                    listTitle: "供应商列表",
                    nameHeader: "姓名",
                    contactHeader: "联系人",
                    phoneHeader: "电话",
                    actionsHeader: "操作"
                },
                reports: {
                    title: "报告",
                    generateReports: "生成报告",
                    inventoryReport: "库存报告",
                    shipmentsReport: "发货报告",
                    clientsReport: "客户报告",
                    productNameHeader: "名称",
                    productCodeHeader: "代码",
                    productDescriptionHeader: "描述",
                    productQuantityHeader: "数量",
                    shipmentGuideHeader: "指南",
                    shipmentClientHeader: "客户",
                    shipmentDestinationHeader: "目的地",
                    shipmentProductsHeader: "产品",
                    shipmentStatusHeader: "状态",
                    clientNameHeader: "姓名",
                    clientEmailHeader: "电子邮件",
                    clientPhoneHeader: "电话",
                    clientShipmentsHeader: "发货"
                },
                modal: {
                    editItem: "编辑项目",
                    cancel: "取消",
                    saveChanges: "保存更改"
                },
                notifications: {
                    productAdded: "产品添加成功",
                    productUpdated: "产品更新成功",
                    productDeleted: "产品删除成功",
                    clientAdded: "客户添加成功",
                    clientUpdated: "客户更新成功",
                    clientDeleted: "客户删除成功",
                    supplierAdded: "供应商添加成功",
                    supplierUpdated: "供应商更新成功",
                    supplierDeleted: "供应商删除成功",
                    shipmentAdded: "发货注册成功",
                    shipmentUpdated: "发货更新成功",
                    shipmentDeleted: "发货删除成功",
                    favoriteAdded: "产品添加到收藏夹",
                    favoriteRemoved: "产品从收藏夹移除",
                    cannotDeleteClient: "无法删除，客户有相关发货"
                },
                worldClock: {
                    newYork: "纽约",
                    london: "伦敦",
                    tokyo: "东京",
                    beijing: "北京",
                    dubai: "迪拜",
                    sydney: "悉尼",
                    moscow: "莫斯科",
                    mexicoCity: "墨西哥城",
                    bogota: "波哥大",
                    buenosAires: "布宜诺斯艾利斯"
                }
            }
        };

        // Estado de la aplicación
        let currentUser = null;
        let currentLanguage = 'es';

        // Función para aplicar traducciones
        function applyTranslations() {
            const lang = translations[currentLanguage];
            
            // Login
            if (document.getElementById('login-title')) {
                document.getElementById('login-title').textContent = lang.login.title;
                document.getElementById('username-label').textContent = lang.login.username;
                document.getElementById('password-label').textContent = lang.login.password;
                document.getElementById('login-btn-text').textContent = lang.login.button;
            }
            
            // Tema
            const themeToggleText = document.getElementById('theme-toggle-text');
            if (themeToggleText) {
                themeToggleText.textContent = document.body.classList.contains('dark-mode') 
                    ? lang.theme.light 
                    : lang.theme.dark;
            }
            
            // Menú
            document.getElementById('menu-dashboard').textContent = lang.menu.dashboard;
            document.getElementById('menu-inventory').textContent = lang.menu.inventory;
            document.getElementById('menu-favorites').textContent = lang.menu.favorites;
            document.getElementById('menu-shipments').textContent = lang.menu.shipments;
            document.getElementById('menu-clients').textContent = lang.menu.clients;
            document.getElementById('menu-suppliers').textContent = lang.menu.suppliers;
            document.getElementById('menu-reports').textContent = lang.menu.reports;
            
            // Dashboard
            document.getElementById('dashboard-title').textContent = lang.dashboard.title;
            document.getElementById('welcome-message').textContent = lang.dashboard.welcome;
            document.getElementById('summary-title').textContent = lang.dashboard.summary;
            document.getElementById('world-clock-title').textContent = lang.dashboard.worldClock;
            document.getElementById('last-shipments-title').textContent = lang.dashboard.lastShipments;
            document.getElementById('low-stock-title').textContent = lang.dashboard.lowStock;
            document.getElementById('inventory-card-title').textContent = lang.dashboard.inventory;
            document.getElementById('pending-card-title').textContent = lang.dashboard.pending;
            document.getElementById('transit-card-title').textContent = lang.dashboard.transit;
            document.getElementById('delivered-card-title').textContent = lang.dashboard.delivered;
            document.getElementById('clients-card-title').textContent = lang.dashboard.clients;
            document.getElementById('favorites-card-title').textContent = lang.dashboard.favorites;
            
            // Inventario
            document.getElementById('inventory-title').textContent = lang.inventory.title;
            document.getElementById('add-product-title').textContent = lang.inventory.addProduct;
            document.getElementById('product-name-label').textContent = lang.inventory.productName;
            document.getElementById('product-code-label').textContent = lang.inventory.code;
            document.getElementById('product-description-label').textContent = lang.inventory.description;
            document.getElementById('product-quantity-label').textContent = lang.inventory.quantity;
            document.getElementById('add-product-btn-text').textContent = lang.inventory.addButton;
            document.getElementById('product-list-title').textContent = lang.inventory.listTitle;
            document.getElementById('product-name-header').textContent = lang.inventory.nameHeader;
            document.getElementById('product-code-header').textContent = lang.inventory.codeHeader;
            document.getElementById('product-quantity-header').textContent = lang.inventory.quantityHeader;
            document.getElementById('product-favorite-header').textContent = lang.inventory.favoriteHeader;
            document.getElementById('product-actions-header').textContent = lang.inventory.actionsHeader;
            
            // Favoritos
            document.getElementById('favorites-title').textContent = lang.favorites.title;
            document.getElementById('my-favorites-title').textContent = lang.favorites.myFavorites;
            
            // Envíos
            document.getElementById('shipments-title').textContent = lang.shipments.title;
            document.getElementById('new-shipment-title').textContent = lang.shipments.newShipment;
            document.getElementById('tracking-number-label').textContent = lang.shipments.trackingNumber;
            document.getElementById('shipment-client-label').textContent = lang.shipments.client;
            document.getElementById('shipment-destination-label').textContent = lang.shipments.destination;
            document.getElementById('shipment-products-label').textContent = lang.shipments.products;
            document.getElementById('shipment-status-label').textContent = lang.shipments.status;
            document.getElementById('register-shipment-btn-text').textContent = lang.shipments.registerButton;
            document.getElementById('shipment-list-title').textContent = lang.shipments.listTitle;
            document.getElementById('shipment-guide-header').textContent = lang.shipments.guideHeader;
            document.getElementById('shipment-client-header').textContent = lang.shipments.clientHeader;
            document.getElementById('shipment-destination-header').textContent = lang.shipments.destinationHeader;
            document.getElementById('shipment-products-header').textContent = lang.shipments.productsHeader;
            document.getElementById('shipment-status-header').textContent = lang.shipments.statusHeader;
            document.getElementById('shipment-actions-header').textContent = lang.shipments.actionsHeader;
            
            // Clientes
            document.getElementById('clients-title').textContent = lang.clients.title;
            document.getElementById('add-client-title').textContent = lang.clients.addClient;
            document.getElementById('client-name-label').textContent = lang.clients.name;
            document.getElementById('client-email-label').textContent = lang.clients.email;
            document.getElementById('client-phone-label').textContent = lang.clients.phone;
            document.getElementById('add-client-btn-text').textContent = lang.clients.addButton;
            document.getElementById('client-list-title').textContent = lang.clients.listTitle;
            document.getElementById('client-name-header').textContent = lang.clients.nameHeader;
            document.getElementById('client-email-header').textContent = lang.clients.emailHeader;
            document.getElementById('client-phone-header').textContent = lang.clients.phoneHeader;
            document.getElementById('client-actions-header').textContent = lang.clients.actionsHeader;
            
            // Proveedores
            document.getElementById('suppliers-title').textContent = lang.suppliers.title;
            document.getElementById('add-supplier-title').textContent = lang.suppliers.addSupplier;
            document.getElementById('supplier-name-label').textContent = lang.suppliers.name;
            document.getElementById('supplier-contact-label').textContent = lang.suppliers.contact;
            document.getElementById('supplier-phone-label').textContent = lang.suppliers.phone;
            document.getElementById('add-supplier-btn-text').textContent = lang.suppliers.addButton;
            document.getElementById('supplier-list-title').textContent = lang.suppliers.listTitle;
            document.getElementById('supplier-name-header').textContent = lang.suppliers.nameHeader;
            document.getElementById('supplier-contact-header').textContent = lang.suppliers.contactHeader;
            document.getElementById('supplier-phone-header').textContent = lang.suppliers.phoneHeader;
            document.getElementById('supplier-actions-header').textContent = lang.suppliers.actionsHeader;
            
            // Reportes
            document.getElementById('reports-title').textContent = lang.reports.title;
            document.getElementById('generate-reports-title').textContent = lang.reports.generateReports;
            document.getElementById('inventory-report-btn-text').textContent = lang.reports.inventoryReport;
            document.getElementById('shipments-report-btn-text').textContent = lang.reports.shipmentsReport;
            document.getElementById('clients-report-btn-text').textContent = lang.reports.clientsReport;
            document.getElementById('inventory-report-title').textContent = lang.reports.inventoryReport;
            document.getElementById('shipments-report-title').textContent = lang.reports.shipmentsReport;
            document.getElementById('clients-report-title').textContent = lang.reports.clientsReport;
            document.getElementById('report-product-name-header').textContent = lang.reports.productNameHeader;
            document.getElementById('report-product-code-header').textContent = lang.reports.productCodeHeader;
            document.getElementById('report-product-description-header').textContent = lang.reports.productDescriptionHeader;
            document.getElementById('report-product-quantity-header').textContent = lang.reports.productQuantityHeader;
            document.getElementById('report-shipment-guide-header').textContent = lang.reports.shipmentGuideHeader;
            document.getElementById('report-shipment-client-header').textContent = lang.reports.shipmentClientHeader;
            document.getElementById('report-shipment-destination-header').textContent = lang.reports.shipmentDestinationHeader;
            document.getElementById('report-shipment-products-header').textContent = lang.reports.shipmentProductsHeader;
            document.getElementById('report-shipment-status-header').textContent = lang.reports.shipmentStatusHeader;
            document.getElementById('report-client-name-header').textContent = lang.reports.clientNameHeader;
            document.getElementById('report-client-email-header').textContent = lang.reports.clientEmailHeader;
            document.getElementById('report-client-phone-header').textContent = lang.reports.clientPhoneHeader;
            document.getElementById('report-client-shipments-header').textContent = lang.reports.clientShipmentsHeader;
            
            // Modal
            document.getElementById('modalTitle').textContent = lang.modal.editItem;
            document.getElementById('cancel-edit-btn').textContent = lang.modal.cancel;
            document.getElementById('saveChanges').textContent = lang.modal.saveChanges;
        }

        // Función para manejar el login
        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Validar usuario
            const users = getUsers();
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                saveData('currentUser', user);
                
                // Ocultar login y mostrar aplicación
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                
                // Mostrar nombre de usuario en el avatar
                const initials = user.name.split(' ').map(n => n[0]).join('').toUpperCase();
                document.querySelector('.user-avatar').textContent = initials;
                
                showToast(`${translations[currentLanguage].login.welcome} ${user.name}`);
                
                // Inicializar la aplicación
                initApp();
            } else {
                showToast(translations[currentLanguage].login.error, true);
            }
        }

        // Función para cerrar sesión
        function logout() {
            if (confirm(currentLanguage === 'es' ? '¿Estás seguro de cerrar sesión?' : 
                currentLanguage === 'en' ? 'Are you sure you want to logout?' : '您确定要退出吗？')) {
                
                currentUser = null;
                localStorage.removeItem('currentUser');
                
                // Ocultar aplicación y mostrar login
                document.getElementById('app-container').classList.add('hidden');
                document.getElementById('login-page').classList.remove('hidden');
                
                // Limpiar formulario
                document.getElementById('login-form').reset();
            }
        }

        // Función para cambiar el idioma
        function changeLanguage(lang) {
            currentLanguage = lang;
            saveData('language', lang);
            applyTranslations();
            
            // Cerrar el selector de idioma
            document.getElementById('language-options').classList.remove('show');
            
            // Actualizar el reloj mundial
            updateWorldClock();
        }

        // Función para actualizar el reloj mundial
        function updateWorldClock() {
            const timeZones = [
                { city: translations[currentLanguage].worldClock.newYork, timeZone: 'America/New_York' },
                { city: translations[currentLanguage].worldClock.london, timeZone: 'Europe/London' },
                { city: translations[currentLanguage].worldClock.tokyo, timeZone: 'Asia/Tokyo' },
                { city: translations[currentLanguage].worldClock.beijing, timeZone: 'Asia/Shanghai' },
                { city: translations[currentLanguage].worldClock.dubai, timeZone: 'Asia/Dubai' },
                { city: translations[currentLanguage].worldClock.sydney, timeZone: 'Australia/Sydney' },
                { city: translations[currentLanguage].worldClock.moscow, timeZone: 'Europe/Moscow' },
                { city: translations[currentLanguage].worldClock.mexicoCity, timeZone: 'America/Mexico_City' },
                { city: translations[currentLanguage].worldClock.bogota, timeZone: 'America/Bogota' },
                { city: translations[currentLanguage].worldClock.buenosAires, timeZone: 'America/Argentina/Buenos_Aires' }
            ];
            
            const worldClockContainer = document.getElementById('world-clock');
            worldClockContainer.innerHTML = '';
            
            timeZones.forEach(tz => {
                const now = new Date();
                const options = {
                    timeZone: tz.timeZone,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                };
                
                const timeStr = now.toLocaleTimeString(currentLanguage === 'zh' ? 'zh-CN' : currentLanguage, options);
                
                const dateOptions = {
                    timeZone: tz.timeZone,
                    weekday: 'short',
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                };
                
                const dateStr = now.toLocaleDateString(currentLanguage === 'zh' ? 'zh-CN' : currentLanguage, dateOptions);
                
                const clockCard = document.createElement('div');
                clockCard.className = 'clock-card';
                clockCard.innerHTML = `
                    <div class="clock-city">${tz.city}</div>
                    <div class="clock-time">${timeStr}</div>
                    <div class="clock-date">${dateStr}</div>
                `;
                
                worldClockContainer.appendChild(clockCard);
            });
        }

        // Función para iniciar el reloj mundial
        function startWorldClock() {
            updateWorldClock();
            setInterval(updateWorldClock, 1000);
        }

        // Verificar si hay un usuario logueado al cargar
        function checkAuth() {
            const savedUser = loadData('currentUser');
            const savedLang = loadData('language') || 'es';
            
            if (savedUser) {
                currentUser = savedUser;
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                
                // Mostrar nombre de usuario en el avatar
                const initials = savedUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                document.querySelector('.user-avatar').textContent = initials;
            }
            
            // Configurar idioma
            changeLanguage(savedLang);
        }

        // Función para inicializar la aplicación
        function initApp() {
            initializeData();
            setupEventListeners();
            renderDashboard();
            renderInventoryList();
            renderClientsList();
            renderSuppliersList();
            renderShipmentsList();
            renderFavoritesList();
            populateClientDropdown();
            checkThemePreference();
            handleRouting();
            startWorldClock();
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Formularios
            document.getElementById('inventory-form').addEventListener('submit', handleAddProduct);
            document.getElementById('client-form').addEventListener('submit', handleAddClient);
            document.getElementById('supplier-form').addEventListener('submit', handleAddSupplier);
            document.getElementById('shipment-form').addEventListener('submit', handleAddShipment);

            // Reportes
            document.getElementById('inventory-report-btn').addEventListener('click', generateInventoryReport);
            document.getElementById('shipments-report-btn').addEventListener('click', generateShipmentsReport);
            document.getElementById('clients-report-btn').addEventListener('click', generateClientsReport);

            // Tema oscuro/claro
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);

            // Modal
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', closeModal);
            });

            document.getElementById('saveChanges').addEventListener('click', saveEditedItem);

            // Cerrar modal haciendo clic fuera del contenido
            document.getElementById('editModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // Manejar clics en el menú
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    navigateTo(section);
                });
            });

            // Configurar eventos de login
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Configurar selector de idioma
            document.getElementById('language-btn').addEventListener('click', function() {
                document.getElementById('language-options').classList.toggle('show');
            });
            
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    changeLanguage(this.dataset.lang);
                });
            });
            
            // Configurar avatar de usuario para cerrar sesión
            document.querySelector('.user-avatar').addEventListener('click', logout);
        }

        // Manejar el enrutamiento
        function handleRouting() {
            window.addEventListener('popstate', function() {
                const hash = window.location.hash.substring(1) || 'dashboard';
                showPage(hash);
            });

            const initialHash = window.location.hash.substring(1) || 'dashboard';
            showPage(initialHash);
        }

        // Navegar a una página específica
        function navigateTo(page) {
            window.location.hash = page;
            showPage(page);
            updateActiveMenuItem(page);
        }

        // Mostrar la página correspondiente
        function showPage(page) {
            const pages = ['dashboard', 'inventory', 'favorites', 'shipments', 'clients', 'suppliers', 'reports'];
            
            // Ocultar todas las páginas
            pages.forEach(p => {
                const pageElement = document.getElementById(`${p}-page`);
                if (pageElement) {
                    pageElement.classList.remove('active');
                }
            });

            // Mostrar la página solicitada
            const activePage = document.getElementById(`${page}-page`);
            if (activePage) {
                activePage.classList.add('active');
            } else {
                // Si la página no existe, mostrar dashboard
                document.getElementById('dashboard-page').classList.add('active');
            }

            // Actualizar el contenido dinámico si es necesario
            if (page === 'dashboard') {
                renderDashboard();
            } else if (page === 'favorites') {
                renderFavoritesList();
            }
        }

        // Actualizar el elemento del menú activo
        function updateActiveMenuItem(page) {
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === page) {
                    item.classList.add('active');
                }
            });
        }

        // Renderizar dashboard
        function renderDashboard() {
            const products = getProducts();
            const clients = getClients();
            const shipments = getShipments();
            const favorites = getFavorites();
            
            document.getElementById('inventory-count').textContent = products.length;
            document.getElementById('clients-count').textContent = clients.length;
            document.getElementById('favorites-count').textContent = favorites.length;
            
            const pendingCount = shipments.filter(s => s.status === 'Pendiente' || s.status === 'Pending' || s.status === '待处理').length;
            const transitCount = shipments.filter(s => s.status === 'En Tránsito' || s.status === 'In Transit' || s.status === '运输中').length;
            const deliveredCount = shipments.filter(s => s.status === 'Entregado' || s.status === 'Delivered' || s.status === '已交付').length;
            
            document.getElementById('pending-count').textContent = pendingCount;
            document.getElementById('transit-count').textContent = transitCount;
            document.getElementById('delivered-count').textContent = deliveredCount;

            // Últimos envíos
            const recentShipmentsList = document.getElementById('recent-shipments');
            recentShipmentsList.innerHTML = '';
            const recentShipments = shipments.slice(-3).reverse();
            
            recentShipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const clientName = client ? client.name : currentLanguage === 'es' ? 'Cliente desconocido' : 
                                          currentLanguage === 'en' ? 'Unknown client' : '未知客户';
                
                let statusClass = '';
                let statusText = shipment.status;
                
                if (shipment.status === 'Pendiente' || shipment.status === 'Pending' || shipment.status === '待处理') {
                    statusClass = 'status-pending';
                    statusText = translations[currentLanguage].shipments.pending;
                } else if (shipment.status === 'En Tránsito' || shipment.status === 'In Transit' || shipment.status === '运输中') {
                    statusClass = 'status-transit';
                    statusText = translations[currentLanguage].shipments.transit;
                } else if (shipment.status === 'Entregado' || shipment.status === 'Delivered' || shipment.status === '已交付') {
                    statusClass = 'status-delivered';
                    statusText = translations[currentLanguage].shipments.delivered;
                }
                
                const li = document.createElement('li');
                li.style.marginBottom = '8px';
                li.style.display = 'flex';
                li.style.justifyContent = 'space-between';
                
                li.innerHTML = `
                    <span>${shipment.trackingNumber} - ${clientName}</span>
                    <span class="${statusClass}" style="border-radius: 12px; padding: 2px 8px; font-size: 12px;">${statusText}</span>
                `;
                recentShipmentsList.appendChild(li);
            });

            // Productos con bajo stock
            const lowStockList = document.getElementById('low-stock');
            lowStockList.innerHTML = '';
            const lowStockProducts = products.filter(p => p.quantity < 20);
            
            if (lowStockProducts.length === 0) {
                const li = document.createElement('li');
                li.textContent = currentLanguage === 'es' ? 'No hay productos con bajo stock' : 
                                 currentLanguage === 'en' ? 'No low stock products' : '没有低库存产品';
                li.style.fontStyle = 'italic';
                li.style.opacity = '0.7';
                lowStockList.appendChild(li);
            } else {
                lowStockProducts.forEach(product => {
                    const li = document.createElement('li');
                    li.style.marginBottom = '8px';
                    li.style.display = 'flex';
                    li.style.justifyContent = 'space-between';
                    li.innerHTML = `
                        <span>${product.name} (${product.code})</span>
                        <span style="color: ${product.quantity < 10 ? '#e63946' : '#f8961e'}; font-weight: 500;">${product.quantity} ${currentLanguage === 'es' ? 'unidades' : currentLanguage === 'en' ? 'units' : '单位'}</span>
                    `;
                    lowStockList.appendChild(li);
                });
            }
        }

        // Manejar agregar producto
        function handleAddProduct(e) {
            e.preventDefault();
            
            const name = document.getElementById('product-name').value;
            const code = document.getElementById('product-code').value;
            const description = document.getElementById('product-description').value;
            const quantity = parseInt(document.getElementById('product-quantity').value);
            
            const products = getProducts();
            const newProduct = {
                id: getNextId(products),
                name,
                code,
                description,
                quantity,
                favorite: false
            };
            
            products.push(newProduct);
            saveData('products', products);
            
            renderInventoryList();
            renderDashboard();
            renderFavoritesList();
            document.getElementById('inventory-form').reset();
            
            showToast(translations[currentLanguage].notifications.productAdded);
        }

        // Renderizar lista de productos
        function renderInventoryList() {
            const products = getProducts();
            const tbody = document.getElementById('inventory-list');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.code}</td>
                    <td>${product.quantity}</td>
                    <td>
                        <i class="fas fa-star favorite-icon ${product.favorite ? 'active' : ''}" 
                           onclick="toggleFavorite(${product.id})"
                           style="color: ${product.favorite ? '#ffd700' : '#ccc'}; cursor: pointer;"></i>
                    </td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('product', ${product.id})">
                            <i class="fas fa-edit"></i> ${translations[currentLanguage].modal.editItem}
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('product', ${product.id})">
                            <i class="fas fa-trash"></i> ${currentLanguage === 'es' ? 'Eliminar' : currentLanguage === 'en' ? 'Delete' : '删除'}
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Alternar producto favorito
        function toggleFavorite(productId) {
            const products = getProducts();
            const productIndex = products.findIndex(p => p.id === productId);
            
            if (productIndex !== -1) {
                products[productIndex].favorite = !products[productIndex].favorite;
                saveData('products', products);
                renderInventoryList();
                renderFavoritesList();
                renderDashboard();
                
                const message = products[productIndex].favorite 
                    ? translations[currentLanguage].notifications.favoriteAdded 
                    : translations[currentLanguage].notifications.favoriteRemoved;
                showToast(message);
            }
        }

        // Renderizar lista de favoritos
        function renderFavoritesList() {
            const favorites = getFavorites();
            const container = document.getElementById('favorites-list');
            container.innerHTML = '';
            
            if (favorites.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-star"></i>
                    <p>${translations[currentLanguage].favorites.emptyState}</p>
                    <p style="font-size: 14px; margin-top: 10px;">${translations[currentLanguage].favorites.emptyStateSub}</p>
                `;
                container.appendChild(emptyState);
                return;
            }
            
            favorites.forEach(product => {
                const item = document.createElement('div');
                item.className = 'favorite-item';
                item.innerHTML = `
                    <i class="fas fa-times remove-favorite" onclick="toggleFavorite(${product.id})"></i>
                    <h3>${product.name}</h3>
                    <p><strong>${translations[currentLanguage].inventory.code}:</strong> ${product.code}</p>
                    <p><strong>${translations[currentLanguage].inventory.quantity}:</strong> ${product.quantity}</p>
                    <p style="margin-top: 10px; font-size: 13px;">${product.description || (currentLanguage === 'es' ? 'Sin descripción' : currentLanguage === 'en' ? 'No description' : '没有描述')}</p>
                `;
                container.appendChild(item);
            });
        }

        // Manejar agregar cliente
        function handleAddClient(e) {
            e.preventDefault();
            
            const name = document.getElementById('client-name').value;
            const email = document.getElementById('client-email').value;
            const phone = document.getElementById('client-phone').value;
            
            const clients = getClients();
            const newClient = {
                id: getNextId(clients),
                name,
                email,
                phone
            };
            
            clients.push(newClient);
            saveData('clients', clients);
            
            renderClientsList();
            renderDashboard();
            populateClientDropdown();
            document.getElementById('client-form').reset();
            
            showToast(translations[currentLanguage].notifications.clientAdded);
        }

        // Renderizar lista de clientes
        function renderClientsList() {
            const clients = getClients();
            const tbody = document.getElementById('clients-list');
            tbody.innerHTML = '';
            
            clients.forEach(client => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('client', ${client.id})">
                            <i class="fas fa-edit"></i> ${translations[currentLanguage].modal.editItem}
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('client', ${client.id})">
                            <i class="fas fa-trash"></i> ${currentLanguage === 'es' ? 'Eliminar' : currentLanguage === 'en' ? 'Delete' : '删除'}
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Manejar agregar proveedor
        function handleAddSupplier(e) {
            e.preventDefault();
            
            const name = document.getElementById('supplier-name').value;
            const contact = document.getElementById('supplier-contact').value;
            const phone = document.getElementById('supplier-phone').value;
            
            const suppliers = getSuppliers();
            const newSupplier = {
                id: getNextId(suppliers),
                name,
                contact,
                phone
            };
            
            suppliers.push(newSupplier);
            saveData('suppliers', suppliers);
            
            renderSuppliersList();
            document.getElementById('supplier-form').reset();
            
            showToast(translations[currentLanguage].notifications.supplierAdded);
        }

        // Renderizar lista de proveedores
        function renderSuppliersList() {
            const suppliers = getSuppliers();
            const tbody = document.getElementById('suppliers-list');
            tbody.innerHTML = '';
            
            suppliers.forEach(supplier => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${supplier.name}</td>
                    <td>${supplier.contact}</td>
                    <td>${supplier.phone}</td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('supplier', ${supplier.id})">
                            <i class="fas fa-edit"></i> ${translations[currentLanguage].modal.editItem}
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('supplier', ${supplier.id})">
                            <i class="fas fa-trash"></i> ${currentLanguage === 'es' ? 'Eliminar' : currentLanguage === 'en' ? 'Delete' : '删除'}
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Manejar agregar envío
        function handleAddShipment(e) {
            e.preventDefault();
            
            const trackingNumber = document.getElementById('tracking-number').value;
            const clientId = parseInt(document.getElementById('shipment-client').value);
            const destination = document.getElementById('shipment-destination').value;
            const productsList = document.getElementById('shipment-products').value;
            const status = document.getElementById('shipment-status').value;
            
            const shipments = getShipments();
            const newShipment = {
                id: getNextId(shipments),
                trackingNumber,
                clientId,
                destination,
                products: productsList,
                status: translations[currentLanguage].shipments[status.toLowerCase().replace(' ', '')]
            };
            
            shipments.push(newShipment);
            saveData('shipments', shipments);
            
            renderShipmentsList();
            renderDashboard();
            document.getElementById('shipment-form').reset();
            
            showToast(translations[currentLanguage].notifications.shipmentAdded);
        }

        // Renderizar lista de envíos
        function renderShipmentsList() {
            const shipments = getShipments();
            const clients = getClients();
            const tbody = document.getElementById('shipments-list');
            tbody.innerHTML = '';
            
            shipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const clientName = client ? client.name : currentLanguage === 'es' ? 'Cliente desconocido' : 
                                          currentLanguage === 'en' ? 'Unknown client' : '未知客户';
                
                let statusClass = '';
                let statusText = shipment.status;
                
                if (shipment.status === translations[currentLanguage].shipments.pending) {
                    statusClass = 'status-pending';
                } else if (shipment.status === translations[currentLanguage].shipments.transit) {
                    statusClass = 'status-transit';
                } else if (shipment.status === translations[currentLanguage].shipments.delivered) {
                    statusClass = 'status-delivered';
                }
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${shipment.trackingNumber}</td>
                    <td>${clientName}</td>
                    <td>${shipment.destination}</td>
                    <td>${shipment.products}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        <button class="btn btn-primary btn-sm" onclick="editItem('shipment', ${shipment.id})">
                            <i class="fas fa-edit"></i> ${translations[currentLanguage].modal.editItem}
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('shipment', ${shipment.id})">
                            <i class="fas fa-trash"></i> ${currentLanguage === 'es' ? 'Eliminar' : currentLanguage === 'en' ? 'Delete' : '删除'}
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Llenar dropdown de clientes en formulario de envíos
        function populateClientDropdown() {
            const clients = getClients();
            const select = document.getElementById('shipment-client');
            select.innerHTML = `<option value="">${currentLanguage === 'es' ? 'Seleccionar cliente...' : currentLanguage === 'en' ? 'Select client...' : '选择客户...'}</option>`;
            
            clients.forEach(client => {
                const option = document.createElement('option');
                option.value = client.id;
                option.textContent = client.name;
                select.appendChild(option);
            });
        }

        // Editar elemento
        function editItem(type, id) {
            let item, title, formHtml;
            
            switch (type) {
                case 'product':
                    const products = getProducts();
                    item = products.find(p => p.id === id);
                    title = translations[currentLanguage].modal.editItem;
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">${translations[currentLanguage].inventory.productName}</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-code">${translations[currentLanguage].inventory.code}</label>
                                <input type="text" id="edit-code" class="form-control" value="${item.code}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-quantity">${translations[currentLanguage].inventory.quantity}</label>
                                <input type="number" id="edit-quantity" class="form-control" value="${item.quantity}" required min="0">
                            </div>
                            <div class="form-group full-width">
                                <label for="edit-description">${translations[currentLanguage].inventory.description}</label>
                                <textarea id="edit-description" class="form-control" rows="3">${item.description || ''}</textarea>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'client':
                    const clients = getClients();
                    item = clients.find(c => c.id === id);
                    title = translations[currentLanguage].modal.editItem;
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">${translations[currentLanguage].clients.name}</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-email">${translations[currentLanguage].clients.email}</label>
                                <input type="email" id="edit-email" class="form-control" value="${item.email}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-phone">${translations[currentLanguage].clients.phone}</label>
                                <input type="tel" id="edit-phone" class="form-control" value="${item.phone}" required>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    item = suppliers.find(s => s.id === id);
                    title = translations[currentLanguage].modal.editItem;
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-name">${translations[currentLanguage].suppliers.name}</label>
                                <input type="text" id="edit-name" class="form-control" value="${item.name}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-contact">${translations[currentLanguage].suppliers.contact}</label>
                                <input type="text" id="edit-contact" class="form-control" value="${item.contact}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-phone">${translations[currentLanguage].suppliers.phone}</label>
                                <input type="tel" id="edit-phone" class="form-control" value="${item.phone}" required>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'shipment':
                    const shipments = getShipments();
                    const allClients = getClients();
                    item = shipments.find(s => s.id === id);
                    title = translations[currentLanguage].modal.editItem;
                    
                    let clientOptions = '';
                    allClients.forEach(client => {
                        const selected = client.id === item.clientId ? 'selected' : '';
                        clientOptions += `<option value="${client.id}" ${selected}>${client.name}</option>`;
                    });
                    
                    formHtml = `
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="edit-tracking">${translations[currentLanguage].shipments.trackingNumber}</label>
                                <input type="text" id="edit-tracking" class="form-control" value="${item.trackingNumber}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-client">${translations[currentLanguage].shipments.client}</label>
                                <select id="edit-client" class="form-control" required>
                                    <option value="">${currentLanguage === 'es' ? 'Seleccionar cliente...' : currentLanguage === 'en' ? 'Select client...' : '选择客户...'}</option>
                                    ${clientOptions}
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-destination">${translations[currentLanguage].shipments.destination}</label>
                                <input type="text" id="edit-destination" class="form-control" value="${item.destination}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-products">${translations[currentLanguage].shipments.products}</label>
                                <input type="text" id="edit-products" class="form-control" value="${item.products}" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-status">${translations[currentLanguage].shipments.status}</label>
                                <select id="edit-status" class="form-control" required>
                                    <option value="${translations[currentLanguage].shipments.pending}" ${item.status === translations[currentLanguage].shipments.pending ? 'selected' : ''}>${translations[currentLanguage].shipments.pending}</option>
                                    <option value="${translations[currentLanguage].shipments.transit}" ${item.status === translations[currentLanguage].shipments.transit ? 'selected' : ''}>${translations[currentLanguage].shipments.transit}</option>
                                    <option value="${translations[currentLanguage].shipments.delivered}" ${item.status === translations[currentLanguage].shipments.delivered ? 'selected' : ''}>${translations[currentLanguage].shipments.delivered}</option>
                                </select>
                            </div>
                        </div>
                    `;
                    break;
                    
                default:
                    return;
            }
            
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = formHtml;
            document.getElementById('editModal').style.display = 'flex';
            
            // Guardar el tipo y ID del elemento que se está editando
            document.getElementById('saveChanges').dataset.type = type;
            document.getElementById('saveChanges').dataset.id = id;
        }

        // Guardar cambios en la edición
        function saveEditedItem() {
            const type = this.dataset.type;
            const id = parseInt(this.dataset.id);
            
            switch (type) {
                case 'product':
                    const products = getProducts();
                    const productIndex = products.findIndex(p => p.id === id);
                    
                    if (productIndex !== -1) {
                        products[productIndex] = {
                            ...products[productIndex],
                            name: document.getElementById('edit-name').value,
                            code: document.getElementById('edit-code').value,
                            quantity: parseInt(document.getElementById('edit-quantity').value),
                            description: document.getElementById('edit-description').value
                        };
                        
                        saveData('products', products);
                        renderInventoryList();
                        renderFavoritesList();
                        showToast(translations[currentLanguage].notifications.productUpdated);
                    }
                    break;
                    
                case 'client':
                    const clients = getClients();
                    const clientIndex = clients.findIndex(c => c.id === id);
                    
                    if (clientIndex !== -1) {
                        clients[clientIndex] = {
                            ...clients[clientIndex],
                            name: document.getElementById('edit-name').value,
                            email: document.getElementById('edit-email').value,
                            phone: document.getElementById('edit-phone').value
                        };
                        
                        saveData('clients', clients);
                        renderClientsList();
                        populateClientDropdown();
                        renderShipmentsList();
                        showToast(translations[currentLanguage].notifications.clientUpdated);
                    }
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    const supplierIndex = suppliers.findIndex(s => s.id === id);
                    
                    if (supplierIndex !== -1) {
                        suppliers[supplierIndex] = {
                            ...suppliers[supplierIndex],
                            name: document.getElementById('edit-name').value,
                            contact: document.getElementById('edit-contact').value,
                            phone: document.getElementById('edit-phone').value
                        };
                        
                        saveData('suppliers', suppliers);
                        renderSuppliersList();
                        showToast(translations[currentLanguage].notifications.supplierUpdated);
                    }
                    break;
                    
                case 'shipment':
                    const shipments = getShipments();
                    const shipmentIndex = shipments.findIndex(s => s.id === id);
                    
                    if (shipmentIndex !== -1) {
                        shipments[shipmentIndex] = {
                            ...shipments[shipmentIndex],
                            trackingNumber: document.getElementById('edit-tracking').value,
                            clientId: parseInt(document.getElementById('edit-client').value),
                            destination: document.getElementById('edit-destination').value,
                            products: document.getElementById('edit-products').value,
                            status: document.getElementById('edit-status').value
                        };
                        
                        saveData('shipments', shipments);
                        renderShipmentsList();
                        renderDashboard();
                        showToast(translations[currentLanguage].notifications.shipmentUpdated);
                    }
                    break;
            }
            
            closeModal();
        }

        // Eliminar elemento
        function deleteItem(type, id) {
            if (!confirm(currentLanguage === 'es' ? '¿Estás seguro de eliminar este elemento?' : 
                         currentLanguage === 'en' ? 'Are you sure you want to delete this item?' : '您确定要删除此项吗？')) return;
            
            switch (type) {
                case 'product':
                    let products = getProducts();
                    products = products.filter(p => p.id !== id);
                    saveData('products', products);
                    renderInventoryList();
                    renderFavoritesList();
                    renderDashboard();
                    showToast(translations[currentLanguage].notifications.productDeleted);
                    break;
                    
                case 'client':
                    const clients = getClients();
                    const shipments = getShipments();
                    
                    // Verificar si el cliente tiene envíos asociados
                    const hasShipments = shipments.some(s => s.clientId === id);
                    if (hasShipments) {
                        showToast(translations[currentLanguage].notifications.cannotDeleteClient, true);
                        return;
                    }
                    
                    const updatedClients = clients.filter(c => c.id !== id);
                    saveData('clients', updatedClients);
                    renderClientsList();
                    populateClientDropdown();
                    renderDashboard();
                    showToast(translations[currentLanguage].notifications.clientDeleted);
                    break;
                    
                case 'supplier':
                    const suppliers = getSuppliers();
                    const updatedSuppliers = suppliers.filter(s => s.id !== id);
                    saveData('suppliers', updatedSuppliers);
                    renderSuppliersList();
                    showToast(translations[currentLanguage].notifications.supplierDeleted);
                    break;
                    
                case 'shipment':
                    const updatedShipments = getShipments().filter(s => s.id !== id);
                    saveData('shipments', updatedShipments);
                    renderShipmentsList();
                    renderDashboard();
                    showToast(translations[currentLanguage].notifications.shipmentDeleted);
                    break;
            }
        }

        // Cerrar modal
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Generar reporte de inventario
        function generateInventoryReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const products = getProducts();
            const tbody = document.getElementById('inventory-report-list');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.code}</td>
                    <td>${product.description || '-'}</td>
                    <td>${product.quantity}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('inventory-report').style.display = 'block';
        }

        // Generar reporte de envíos
        function generateShipmentsReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const shipments = getShipments();
            const clients = getClients();
            const tbody = document.getElementById('shipments-report-list');
            tbody.innerHTML = '';
            
            shipments.forEach(shipment => {
                const client = clients.find(c => c.id === shipment.clientId);
                const clientName = client ? client.name : currentLanguage === 'es' ? 'Cliente desconocido' : 
                                          currentLanguage === 'en' ? 'Unknown client' : '未知客户';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${shipment.trackingNumber}</td>
                    <td>${clientName}</td>
                    <td>${shipment.destination}</td>
                    <td>${shipment.products}</td>
                    <td>${shipment.status}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('shipments-report').style.display = 'block';
        }

        // Generar reporte de clientes
        function generateClientsReport() {
            document.querySelectorAll('.report-content').forEach(report => {
                report.style.display = 'none';
            });
            
            const clients = getClients();
            const shipments = getShipments();
            const tbody = document.getElementById('clients-report-list');
            tbody.innerHTML = '';
            
            clients.forEach(client => {
                const clientShipments = shipments.filter(s => s.clientId === client.id);
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td>${clientShipments.length}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('clients-report').style.display = 'block';
        }

        // Mostrar notificación toast
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${isError ? 'error' : ''}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Alternar tema oscuro/claro
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            saveData('darkMode', isDarkMode);
            
            const themeToggle = document.getElementById('themeToggle');
            if (isDarkMode) {
                themeToggle.innerHTML = `<i class="fas fa-sun"></i><span id="theme-toggle-text">${translations[currentLanguage].theme.light}</span>`;
            } else {
                themeToggle.innerHTML = `<i class="fas fa-moon"></i><span id="theme-toggle-text">${translations[currentLanguage].theme.dark}</span>`;
            }
        }

        // Verificar preferencia de tema
        function checkThemePreference() {
            const darkMode = loadData('darkMode');
            if (darkMode) {
                document.body.classList.add('dark-mode');
                const themeToggle = document.getElementById('themeToggle');
                themeToggle.innerHTML = `<i class="fas fa-sun"></i><span id="theme-toggle-text">${translations[currentLanguage].theme.light}</span>`;
            }
        }

        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            
            // Configurar evento de logout
            document.querySelector('.user-avatar').addEventListener('click', logout);
            
            // Si hay usuario autenticado, inicializar la aplicación
            if (currentUser) {
                initApp();
            }
        });

        // Hacer las funciones accesibles globalmente para los eventos onclick
        window.toggleFavorite = toggleFavorite;
        window.editItem = editItem;
        window.deleteItem = deleteItem;
    </script>
</body>
</html>